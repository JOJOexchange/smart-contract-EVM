{"abi":[{"type":"function","name":"balanceOf","inputs":[{"name":"trader","type":"address","internalType":"address"}],"outputs":[{"name":"paper","type":"int256","internalType":"int256"},{"name":"credit","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"getFundingRate","inputs":[],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"liquidate","inputs":[{"name":"liquidator","type":"address","internalType":"address"},{"name":"liquidatedTrader","type":"address","internalType":"address"},{"name":"requestPaper","type":"int256","internalType":"int256"},{"name":"expectCredit","type":"int256","internalType":"int256"}],"outputs":[{"name":"liqtorPaperChange","type":"int256","internalType":"int256"},{"name":"liqtorCreditChange","type":"int256","internalType":"int256"}],"stateMutability":"nonpayable"},{"type":"function","name":"trade","inputs":[{"name":"tradeData","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateFundingRate","inputs":[{"name":"newFundingRate","type":"int256","internalType":"int256"}],"outputs":[],"stateMutability":"nonpayable"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"balanceOf(address)":"70a08231","getFundingRate()":"95196f7e","liquidate(address,address,int256,int256)":"c1790370","trade(bytes)":"1037ea51","updateFundingRate(int256)":"c2684de6"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"paper\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"credit\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getFundingRate\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"liquidator\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"liquidatedTrader\",\"type\":\"address\"},{\"internalType\":\"int256\",\"name\":\"requestPaper\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"expectCredit\",\"type\":\"int256\"}],\"name\":\"liquidate\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"liqtorPaperChange\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"liqtorCreditChange\",\"type\":\"int256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"tradeData\",\"type\":\"bytes\"}],\"name\":\"trade\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"int256\",\"name\":\"newFundingRate\",\"type\":\"int256\"}],\"name\":\"updateFundingRate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"balanceOf(address)\":{\"returns\":{\"credit\":\"is not related to position direction or entry price, only used to calculate risk ratio and net value.\",\"paper\":\"is positive when the trader holds a long position and negative when the trader holds a short position.\"}},\"liquidate(address,address,int256,int256)\":{\"details\":\"Because the liquidation is open to public, there is no guarantee that your request will be executed. It will not be executed or partially executed if: 1) someone else submitted a liquidation request before you, or 2) the trader deposited enough margin in time, or 3) the mark price moved beyond your price protection. Your liquidation will be limited to the position size. For example, if the position remains 10ETH and you're requesting a 15ETH liquidation. Only 10ETH will be executed. And the other 5ETH request will be cancelled.\",\"params\":{\"expectCredit\":\"is the amount of credit you want to pay (when liquidating a short position) or receive (when liquidating a long position)\",\"liquidatedTrader\":\"is the trader you want to liquidate.\",\"requestPaper\":\"is the size of position you want to take . requestPaper is positive when you want to liquidate a long position, negative when short.\"},\"returns\":{\"liqtorCreditChange\":\"is the final executed change of liquidator's credit amount\",\"liqtorPaperChange\":\"is the final executed change of liquidator's paper amount\"}},\"trade(bytes)\":{\"details\":\"tradeData will be forwarded to the Dealer contract and waiting for matching result. Then the Perpetual contract will execute the result.\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"balanceOf(address)\":{\"notice\":\"Return the paper amount and credit amount of a certain trader.\"},\"getFundingRate()\":{\"notice\":\"Get funding rate of this perpetual market. Funding rate is a 1e18 based decimal.\"},\"liquidate(address,address,int256,int256)\":{\"notice\":\"Liquidate a position with customized paper amount and price protection.\"},\"trade(bytes)\":{\"notice\":\"Match and settle orders.\"},\"updateFundingRate(int256)\":{\"notice\":\"Update funding rate, owner only function.\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/interfaces/IPerpetual.sol\":\"IPerpetual\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"]},\"sources\":{\"src/interfaces/IPerpetual.sol\":{\"keccak256\":\"0x96a1288126570e5dd1c32d5a7c4f5c19f6d8a355ae002443479acdc70e4ad9e6\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://b0a3144f3979e8c01b6bd0cad28c46ca5a665fb8afa2e67d199cb616543d6e6e\",\"dweb:/ipfs/QmbSXwP8xqFBXiD6haLEJhWWcehqZspXZktZKBo49aEs2M\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.9+commit.e5eed63a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"trader","type":"address"}],"stateMutability":"view","type":"function","name":"balanceOf","outputs":[{"internalType":"int256","name":"paper","type":"int256"},{"internalType":"int256","name":"credit","type":"int256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[{"internalType":"address","name":"liquidator","type":"address"},{"internalType":"address","name":"liquidatedTrader","type":"address"},{"internalType":"int256","name":"requestPaper","type":"int256"},{"internalType":"int256","name":"expectCredit","type":"int256"}],"stateMutability":"nonpayable","type":"function","name":"liquidate","outputs":[{"internalType":"int256","name":"liqtorPaperChange","type":"int256"},{"internalType":"int256","name":"liqtorCreditChange","type":"int256"}]},{"inputs":[{"internalType":"bytes","name":"tradeData","type":"bytes"}],"stateMutability":"nonpayable","type":"function","name":"trade"},{"inputs":[{"internalType":"int256","name":"newFundingRate","type":"int256"}],"stateMutability":"nonpayable","type":"function","name":"updateFundingRate"}],"devdoc":{"kind":"dev","methods":{"balanceOf(address)":{"returns":{"credit":"is not related to position direction or entry price, only used to calculate risk ratio and net value.","paper":"is positive when the trader holds a long position and negative when the trader holds a short position."}},"liquidate(address,address,int256,int256)":{"details":"Because the liquidation is open to public, there is no guarantee that your request will be executed. It will not be executed or partially executed if: 1) someone else submitted a liquidation request before you, or 2) the trader deposited enough margin in time, or 3) the mark price moved beyond your price protection. Your liquidation will be limited to the position size. For example, if the position remains 10ETH and you're requesting a 15ETH liquidation. Only 10ETH will be executed. And the other 5ETH request will be cancelled.","params":{"expectCredit":"is the amount of credit you want to pay (when liquidating a short position) or receive (when liquidating a long position)","liquidatedTrader":"is the trader you want to liquidate.","requestPaper":"is the size of position you want to take . requestPaper is positive when you want to liquidate a long position, negative when short."},"returns":{"liqtorCreditChange":"is the final executed change of liquidator's credit amount","liqtorPaperChange":"is the final executed change of liquidator's paper amount"}},"trade(bytes)":{"details":"tradeData will be forwarded to the Dealer contract and waiting for matching result. Then the Perpetual contract will execute the result."}},"version":1},"userdoc":{"kind":"user","methods":{"balanceOf(address)":{"notice":"Return the paper amount and credit amount of a certain trader."},"getFundingRate()":{"notice":"Get funding rate of this perpetual market. Funding rate is a 1e18 based decimal."},"liquidate(address,address,int256,int256)":{"notice":"Liquidate a position with customized paper amount and price protection."},"trade(bytes)":{"notice":"Match and settle orders."},"updateFundingRate(int256)":{"notice":"Update funding rate, owner only function."}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/interfaces/IPerpetual.sol":"IPerpetual"},"libraries":{}},"sources":{"src/interfaces/IPerpetual.sol":{"keccak256":"0x96a1288126570e5dd1c32d5a7c4f5c19f6d8a355ae002443479acdc70e4ad9e6","urls":["bzz-raw://b0a3144f3979e8c01b6bd0cad28c46ca5a665fb8afa2e67d199cb616543d6e6e","dweb:/ipfs/QmbSXwP8xqFBXiD6haLEJhWWcehqZspXZktZKBo49aEs2M"],"license":"BUSL-1.1"}},"version":1},"ast":{"absolutePath":"src/interfaces/IPerpetual.sol","id":52068,"exportedSymbols":{"IPerpetual":[52067]},"nodeType":"SourceUnit","src":"78:2551:60","nodes":[{"id":52022,"nodeType":"PragmaDirective","src":"78:22:60","nodes":[],"literals":["solidity","0.8",".9"]},{"id":52067,"nodeType":"ContractDefinition","src":"102:2526:60","nodes":[{"id":52032,"nodeType":"FunctionDefinition","src":"474:101:60","nodes":[],"documentation":{"id":52023,"nodeType":"StructuredDocumentation","src":"129:340:60","text":"@notice Return the paper amount and credit amount of a certain trader.\n @return paper is positive when the trader holds a long position and\n negative when the trader holds a short position.\n @return credit is not related to position direction or entry price,\n only used to calculate risk ratio and net value."},"functionSelector":"70a08231","implemented":false,"kind":"function","modifiers":[],"name":"balanceOf","nameLocation":"483:9:60","parameters":{"id":52026,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52025,"mutability":"mutable","name":"trader","nameLocation":"510:6:60","nodeType":"VariableDeclaration","scope":52032,"src":"502:14:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":52024,"name":"address","nodeType":"ElementaryTypeName","src":"502:7:60","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"492:30:60"},"returnParameters":{"id":52031,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52028,"mutability":"mutable","name":"paper","nameLocation":"553:5:60","nodeType":"VariableDeclaration","scope":52032,"src":"546:12:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52027,"name":"int256","nodeType":"ElementaryTypeName","src":"546:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":52030,"mutability":"mutable","name":"credit","nameLocation":"567:6:60","nodeType":"VariableDeclaration","scope":52032,"src":"560:13:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52029,"name":"int256","nodeType":"ElementaryTypeName","src":"560:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"545:29:60"},"scope":52067,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":52038,"nodeType":"FunctionDefinition","src":"780:50:60","nodes":[],"documentation":{"id":52033,"nodeType":"StructuredDocumentation","src":"581:194:60","text":"@notice Match and settle orders.\n @dev tradeData will be forwarded to the Dealer contract and waiting\n for matching result. Then the Perpetual contract will execute the result."},"functionSelector":"1037ea51","implemented":false,"kind":"function","modifiers":[],"name":"trade","nameLocation":"789:5:60","parameters":{"id":52036,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52035,"mutability":"mutable","name":"tradeData","nameLocation":"810:9:60","nodeType":"VariableDeclaration","scope":52038,"src":"795:24:60","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":52034,"name":"bytes","nodeType":"ElementaryTypeName","src":"795:5:60","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"794:26:60"},"returnParameters":{"id":52037,"nodeType":"ParameterList","parameters":[],"src":"829:0:60"},"scope":52067,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":52054,"nodeType":"FunctionDefinition","src":"2119:216:60","nodes":[],"documentation":{"id":52039,"nodeType":"StructuredDocumentation","src":"836:1278:60","text":"@notice Liquidate a position with customized paper amount and price protection.\n @dev Because the liquidation is open to public, there is no guarantee that\n your request will be executed.\n It will not be executed or partially executed if:\n 1) someone else submitted a liquidation request before you, or\n 2) the trader deposited enough margin in time, or\n 3) the mark price moved beyond your price protection.\n Your liquidation will be limited to the position size. For example, if the\n position remains 10ETH and you're requesting a 15ETH liquidation. Only 10ETH\n will be executed. And the other 5ETH request will be cancelled.\n @param  liquidatedTrader is the trader you want to liquidate.\n @param  requestPaper is the size of position you want to take .\n requestPaper is positive when you want to liquidate a long position, negative when short.\n @param expectCredit is the amount of credit you want to pay (when liquidating a short position)\n or receive (when liquidating a long position)\n @return liqtorPaperChange is the final executed change of liquidator's paper amount\n @return liqtorCreditChange is the final executed change of liquidator's credit amount"},"functionSelector":"c1790370","implemented":false,"kind":"function","modifiers":[],"name":"liquidate","nameLocation":"2128:9:60","parameters":{"id":52048,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52041,"mutability":"mutable","name":"liquidator","nameLocation":"2155:10:60","nodeType":"VariableDeclaration","scope":52054,"src":"2147:18:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":52040,"name":"address","nodeType":"ElementaryTypeName","src":"2147:7:60","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":52043,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"2183:16:60","nodeType":"VariableDeclaration","scope":52054,"src":"2175:24:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":52042,"name":"address","nodeType":"ElementaryTypeName","src":"2175:7:60","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":52045,"mutability":"mutable","name":"requestPaper","nameLocation":"2216:12:60","nodeType":"VariableDeclaration","scope":52054,"src":"2209:19:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52044,"name":"int256","nodeType":"ElementaryTypeName","src":"2209:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":52047,"mutability":"mutable","name":"expectCredit","nameLocation":"2245:12:60","nodeType":"VariableDeclaration","scope":52054,"src":"2238:19:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52046,"name":"int256","nodeType":"ElementaryTypeName","src":"2238:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"2137:126:60"},"returnParameters":{"id":52053,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52050,"mutability":"mutable","name":"liqtorPaperChange","nameLocation":"2289:17:60","nodeType":"VariableDeclaration","scope":52054,"src":"2282:24:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52049,"name":"int256","nodeType":"ElementaryTypeName","src":"2282:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":52052,"mutability":"mutable","name":"liqtorCreditChange","nameLocation":"2315:18:60","nodeType":"VariableDeclaration","scope":52054,"src":"2308:25:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52051,"name":"int256","nodeType":"ElementaryTypeName","src":"2308:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"2281:53:60"},"scope":52067,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":52060,"nodeType":"FunctionDefinition","src":"2446:57:60","nodes":[],"documentation":{"id":52055,"nodeType":"StructuredDocumentation","src":"2341:100:60","text":"@notice Get funding rate of this perpetual market.\n Funding rate is a 1e18 based decimal."},"functionSelector":"95196f7e","implemented":false,"kind":"function","modifiers":[],"name":"getFundingRate","nameLocation":"2455:14:60","parameters":{"id":52056,"nodeType":"ParameterList","parameters":[],"src":"2469:2:60"},"returnParameters":{"id":52059,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52058,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":52060,"src":"2495:6:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52057,"name":"int256","nodeType":"ElementaryTypeName","src":"2495:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"2494:8:60"},"scope":52067,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":52066,"nodeType":"FunctionDefinition","src":"2567:59:60","nodes":[],"documentation":{"id":52061,"nodeType":"StructuredDocumentation","src":"2509:53:60","text":"@notice Update funding rate, owner only function."},"functionSelector":"c2684de6","implemented":false,"kind":"function","modifiers":[],"name":"updateFundingRate","nameLocation":"2576:17:60","parameters":{"id":52064,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52063,"mutability":"mutable","name":"newFundingRate","nameLocation":"2601:14:60","nodeType":"VariableDeclaration","scope":52066,"src":"2594:21:60","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":52062,"name":"int256","nodeType":"ElementaryTypeName","src":"2594:6:60","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"2593:23:60"},"returnParameters":{"id":52065,"nodeType":"ParameterList","parameters":[],"src":"2625:0:60"},"scope":52067,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"IPerpetual","contractDependencies":[],"contractKind":"interface","fullyImplemented":false,"linearizedBaseContracts":[52067],"name":"IPerpetual","nameLocation":"112:10:60","scope":52068,"usedErrors":[]}],"license":"BUSL-1.1"},"id":60}