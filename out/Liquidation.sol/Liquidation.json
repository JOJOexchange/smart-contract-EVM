{"abi":[{"type":"event","name":"BeingLiquidated","inputs":[{"name":"perp","type":"address","indexed":true,"internalType":"address"},{"name":"liquidatedTrader","type":"address","indexed":true,"internalType":"address"},{"name":"paperChange","type":"int256","indexed":false,"internalType":"int256"},{"name":"creditChange","type":"int256","indexed":false,"internalType":"int256"},{"name":"positionSerialNum","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ChargeInsurance","inputs":[{"name":"perp","type":"address","indexed":true,"internalType":"address"},{"name":"liquidatedTrader","type":"address","indexed":true,"internalType":"address"},{"name":"fee","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"HandleBadDebt","inputs":[{"name":"liquidatedTrader","type":"address","indexed":true,"internalType":"address"},{"name":"primaryCredit","type":"int256","indexed":false,"internalType":"int256"},{"name":"secondaryCredit","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"JoinLiquidation","inputs":[{"name":"perp","type":"address","indexed":true,"internalType":"address"},{"name":"liquidator","type":"address","indexed":true,"internalType":"address"},{"name":"liquidatedTrader","type":"address","indexed":true,"internalType":"address"},{"name":"paperChange","type":"int256","indexed":false,"internalType":"int256"},{"name":"creditChange","type":"int256","indexed":false,"internalType":"int256"},{"name":"positionSerialNum","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x61143161003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c806335b270c81461007157806339a9cd2214610093578063471bd8a0146100d85780638bb9082c146100eb578063a67da8b01461010c578063f4392a951461013a575b600080fd5b81801561007d57600080fd5b5061009161008c366004611019565b61014d565b005b81801561009f57600080fd5b506100b36100ae366004611045565b610257565b6040805194855260208501939093529183015260608201526080015b60405180910390f35b6100b36100e6366004611019565b610563565b6100fe6100f93660046110ab565b61083e565b6040519081526020016100cf565b61011f61011a3660046110e7565b610baf565b604080519384526020840192909252908201526060016100cf565b6100fe610148366004611019565b610e81565b6001600160a01b0381166000908152600c8301602052604090205415801561017c575061017a8282610f10565b155b15610253576001600160a01b03808216600090815260028401602081815260408084208054600389018452828620805492879055869055601389015490961685529290915282208054919284926101d4908490611141565b909155505060138401546001600160a01b0316600090815260038501602052604081208054839290610207908490611182565b909155505060408051838152602081018390526001600160a01b038516917f9a85af690143cddcc98411e3b473b0f8b231b5ccd06f34f01aeea120928bc1f1910160405180910390a250505b5050565b600080600080866001600160a01b0316886001600160a01b031614806102a457506001600160a01b03808816600090815260128c0160209081526040808320938c168352929052205460ff165b60405180606001604052806021815260200161139560219139906102e45760405162461bcd60e51b81526004016102db919061119a565b60405180910390fd5b50866001600160a01b0316866001600160a01b031614156040518060600160405280602181526020016113b660219139906103325760405162461bcd60e51b81526004016102db919061119a565b5060006103418b8b8989610baf565b9196509450905061035181610f3a565b60138c01546001600160a01b0316600090815260028d0160205260408120805490919061037f908490611141565b9091555061038e905081610f3a565b61039a856000196111ef565b6103a49190611274565b91506103b2856000196111ef565b925060008b600d016000896001600160a01b03166001600160a01b0316815260200190815260200160002060008c6001600160a01b03166001600160a01b0316815260200190815260200160002054905060008c600d0160008b6001600160a01b03166001600160a01b0316815260200190815260200160002060008d6001600160a01b03166001600160a01b03168152602001908152602001600020549050886001600160a01b03168c6001600160a01b03167f2fb7b7e90b5c64be4cf896093038c228a8c7b10de2d00203147e92b7579885828787866040516104aa939291909283526020830191909152604082015260600190565b60405180910390a360408051888152602081018890529081018290526001600160a01b03808b16918c8216918f16907f3cd850c81398158b5f1d64d3b8abfb27fb238d53b198487867f0baf0d8bdabe39060600160405180910390a4886001600160a01b03168c6001600160a01b03167f64f299799ee8ebad60b5669136b409478231d92f78a4ef652f1e5ce6fd82febe8560405161054b91815260200190565b60405180910390a35050509650965096509692505050565b600080808080805b6001600160a01b0387166000908152600c890160205260409020548110156107de576001600160a01b0387166000908152600c8901602052604081208054829190849081106105bc576105bc6112b3565b6000918252602090912001546040516370a0823160e01b81526001600160a01b038b81166004830152909116906370a0823190602401604080518083038186803b15801561060957600080fd5b505afa15801561061d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061064191906112c9565b9150915060008a600a0160008c600c0160008d6001600160a01b03166001600160a01b031681526020019081526020016000208681548110610685576106856112b3565b60009182526020808320909101546001600160a01b039081168452838201949094526040928301822060048082015485516330204b1960e11b81529551929750939561072d959416936360409632938183019390929091829003018186803b1580156106f057600080fd5b505afa158015610704573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061072891906112ed565b610f3a565b90508261073a8583610fa8565b6107449190611141565b61074e9087611141565b9550600061076461075f8684610fa8565b610fc7565b9050610770818b611182565b9950670de0b6b3a764000083600101548261078b9190611306565b610795919061133b565b61079f9089611182565b8354909850670de0b6b3a7640000906107b89083611306565b6107c2919061133b565b6107cc908a611182565b9850856001019550505050505061056b565b506001600160a01b038616600090815260038801602052604090205461080390610f3a565b6001600160a01b03871660009081526002890160205260409020546108289083611141565b6108329190611141565b94505092959194509250565b6001600160a01b03821660009081526003840160205260408120548190819061086690610f3a565b6001600160a01b038616600090815260028801602052604090205461088b9190611141565b905060005b6001600160a01b0386166000908152600c88016020526040902054811015610a57576001600160a01b0386166000908152600c8801602052604081208054839081106108de576108de6112b3565b6000918252602090912001546001600160a01b03908116915086168114610a4e576040516370a0823160e01b81526001600160a01b03888116600483015260009182918416906370a0823190602401604080518083038186803b15801561094457600080fd5b505afa158015610958573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061097c91906112c9565b6001600160a01b038086166000908152600a8e016020908152604080832060048082015483516330204b1960e11b81529351989a50969850909693956109df95169363604096329383830193909290829003018186803b1580156106f057600080fd5b9050826109ec8583610fa8565b6109f69190611141565b610a009088611141565b9650610a3d670de0b6b3a76400008360010154610a2961075f8589610fa890919063ffffffff16565b610a339190611306565b610728919061133b565b610a479089611141565b9750505050505b50600101610890565b506040516370a0823160e01b81526001600160a01b03868116600483015260009182918716906370a0823190602401604080518083038186803b158015610a9d57600080fd5b505afa158015610ab1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ad591906112c9565b915091508160001415610aef576000945050505050610ba8565b6000808313610b31576001600160a01b0387166000908152600a8a016020526040902060010154610b2c9061072890670de0b6b3a7640000611182565b610b65565b6001600160a01b0387166000908152600a8a016020526040902060010154610b659061072890670de0b6b3a764000061134f565b90506000610b8c82610b868686610b7c8a8c611274565b610b869190611274565b90610fe8565b905060008112610b9c5780610b9f565b60005b96505050505050505b9392505050565b6000806000610bbe8786610f10565b15604051806040016040528060148152602001734a4f4a4f5f4143434f554e545f49535f5341464560601b81525090610c0a5760405162461bcd60e51b81526004016102db919061119a565b506040516370a0823160e01b81526001600160a01b038681166004830152600091908816906370a0823190602401604080518083038186803b158015610c4f57600080fd5b505afa158015610c63573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c8791906112c9565b5060408051808201909152601b81527f4a4f4a4f5f5452414445525f4841535f4e4f5f504f534954494f4e0000000000602082015290915081610cdd5760405162461bcd60e51b81526004016102db919061119a565b506000610cea82876111ef565b136040518060600160405280602581526020016113d76025913990610d225760405162461bcd60e51b81526004016102db919061119a565b50610d2c81610fc7565b610d3586610fc7565b11610d405784610d42565b805b6001600160a01b038089166000908152600a8b016020908152604080832060048082015483516330204b1960e11b81529351979b5091969495919091169363604096329383830193909290829003018186803b158015610da157600080fd5b505afa158015610db5573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd991906112ed565b90506000670de0b6b3a7640000836002015483610df69190611306565b610e00919061133b565b905060008713610e1957610e148183611182565b610e23565b610e23818361134f565b9150610e38610e3183610f3a565b8890610fa8565b610e44906000196111ef565b9550670de0b6b3a76400008360030154610e5d88610fc7565b610e679190611306565b610e71919061133b565b9450505050509450945094915050565b6001600160a01b038082166000908152600a84016020908152604080832060049081015482516330204b1960e11b815292519495169363604096329383830193909290829003018186803b158015610ed857600080fd5b505afa158015610eec573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ba891906112ed565b6000806000610f1f8585610563565b935050509150610f2e81610f3a565b90911215949350505050565b60006001600160ff1b03821115610fa45760405162461bcd60e51b815260206004820152602860248201527f53616665436173743a2076616c756520646f65736e27742066697420696e2061604482015267371034b73a191a9b60c11b60648201526084016102db565b5090565b6000670de0b6b3a7640000610fbd83856111ef565b610ba89190611366565b6000808212610fd65781610fe2565b610fe2826000196111ef565b92915050565b600081610fbd670de0b6b3a7640000856111ef565b80356001600160a01b038116811461101457600080fd5b919050565b6000806040838503121561102c57600080fd5b8235915061103c60208401610ffd565b90509250929050565b60008060008060008060c0878903121561105e57600080fd5b8635955061106e60208801610ffd565b945061107c60408801610ffd565b935061108a60608801610ffd565b925061109860808801610ffd565b915060a087013590509295509295509295565b6000806000606084860312156110c057600080fd5b833592506110d060208501610ffd565b91506110de60408501610ffd565b90509250925092565b600080600080608085870312156110fd57600080fd5b8435935061110d60208601610ffd565b925061111b60408601610ffd565b9396929550929360600135925050565b634e487b7160e01b600052601160045260246000fd5b600080821280156001600160ff1b03849003851316156111635761116361112b565b600160ff1b839003841281161561117c5761117c61112b565b50500190565b600082198211156111955761119561112b565b500190565b600060208083528351808285015260005b818110156111c7578581018301518582016040015282016111ab565b818111156111d9576000604083870101525b50601f01601f1916929092016040019392505050565b60006001600160ff1b03818413828413808216868404861116156112155761121561112b565b600160ff1b60008712828116878305891216156112345761123461112b565b600087129250878205871284841616156112505761125061112b565b878505871281841616156112665761126661112b565b505050929093029392505050565b60008083128015600160ff1b8501841216156112925761129261112b565b6001600160ff1b03840183138116156112ad576112ad61112b565b50500390565b634e487b7160e01b600052603260045260246000fd5b600080604083850312156112dc57600080fd5b505080516020909101519092909150565b6000602082840312156112ff57600080fd5b5051919050565b60008160001904831182151516156113205761132061112b565b500290565b634e487b7160e01b600052601260045260246000fd5b60008261134a5761134a611325565b500490565b6000828210156113615761136161112b565b500390565b60008261137557611375611325565b600160ff1b82146000198414161561138f5761138f61112b565b50059056fe4a4f4a4f5f494e56414c49445f4c49515549444154494f4e5f4558454355544f524a4f4a4f5f53454c465f4c49515549444154494f4e5f4e4f545f414c4c4f5745444a4f4a4f5f4c49515549444154494f4e5f524551554553545f414d4f554e545f57524f4e47a26469706673582212207e0a4d5bec7863f8d0c0c3bf10b93c7767a07a85ce36c8d607e13878a0acadea64736f6c63430008090033","sourceMap":"351:12488:20:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;351:12488:20;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c806335b270c81461007157806339a9cd2214610093578063471bd8a0146100d85780638bb9082c146100eb578063a67da8b01461010c578063f4392a951461013a575b600080fd5b81801561007d57600080fd5b5061009161008c366004611019565b61014d565b005b81801561009f57600080fd5b506100b36100ae366004611045565b610257565b6040805194855260208501939093529183015260608201526080015b60405180910390f35b6100b36100e6366004611019565b610563565b6100fe6100f93660046110ab565b61083e565b6040519081526020016100cf565b61011f61011a3660046110e7565b610baf565b604080519384526020840192909252908201526060016100cf565b6100fe610148366004611019565b610e81565b6001600160a01b0381166000908152600c8301602052604090205415801561017c575061017a8282610f10565b155b15610253576001600160a01b03808216600090815260028401602081815260408084208054600389018452828620805492879055869055601389015490961685529290915282208054919284926101d4908490611141565b909155505060138401546001600160a01b0316600090815260038501602052604081208054839290610207908490611182565b909155505060408051838152602081018390526001600160a01b038516917f9a85af690143cddcc98411e3b473b0f8b231b5ccd06f34f01aeea120928bc1f1910160405180910390a250505b5050565b600080600080866001600160a01b0316886001600160a01b031614806102a457506001600160a01b03808816600090815260128c0160209081526040808320938c168352929052205460ff165b60405180606001604052806021815260200161139560219139906102e45760405162461bcd60e51b81526004016102db919061119a565b60405180910390fd5b50866001600160a01b0316866001600160a01b031614156040518060600160405280602181526020016113b660219139906103325760405162461bcd60e51b81526004016102db919061119a565b5060006103418b8b8989610baf565b9196509450905061035181610f3a565b60138c01546001600160a01b0316600090815260028d0160205260408120805490919061037f908490611141565b9091555061038e905081610f3a565b61039a856000196111ef565b6103a49190611274565b91506103b2856000196111ef565b925060008b600d016000896001600160a01b03166001600160a01b0316815260200190815260200160002060008c6001600160a01b03166001600160a01b0316815260200190815260200160002054905060008c600d0160008b6001600160a01b03166001600160a01b0316815260200190815260200160002060008d6001600160a01b03166001600160a01b03168152602001908152602001600020549050886001600160a01b03168c6001600160a01b03167f2fb7b7e90b5c64be4cf896093038c228a8c7b10de2d00203147e92b7579885828787866040516104aa939291909283526020830191909152604082015260600190565b60405180910390a360408051888152602081018890529081018290526001600160a01b03808b16918c8216918f16907f3cd850c81398158b5f1d64d3b8abfb27fb238d53b198487867f0baf0d8bdabe39060600160405180910390a4886001600160a01b03168c6001600160a01b03167f64f299799ee8ebad60b5669136b409478231d92f78a4ef652f1e5ce6fd82febe8560405161054b91815260200190565b60405180910390a35050509650965096509692505050565b600080808080805b6001600160a01b0387166000908152600c890160205260409020548110156107de576001600160a01b0387166000908152600c8901602052604081208054829190849081106105bc576105bc6112b3565b6000918252602090912001546040516370a0823160e01b81526001600160a01b038b81166004830152909116906370a0823190602401604080518083038186803b15801561060957600080fd5b505afa15801561061d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061064191906112c9565b9150915060008a600a0160008c600c0160008d6001600160a01b03166001600160a01b031681526020019081526020016000208681548110610685576106856112b3565b60009182526020808320909101546001600160a01b039081168452838201949094526040928301822060048082015485516330204b1960e11b81529551929750939561072d959416936360409632938183019390929091829003018186803b1580156106f057600080fd5b505afa158015610704573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061072891906112ed565b610f3a565b90508261073a8583610fa8565b6107449190611141565b61074e9087611141565b9550600061076461075f8684610fa8565b610fc7565b9050610770818b611182565b9950670de0b6b3a764000083600101548261078b9190611306565b610795919061133b565b61079f9089611182565b8354909850670de0b6b3a7640000906107b89083611306565b6107c2919061133b565b6107cc908a611182565b9850856001019550505050505061056b565b506001600160a01b038616600090815260038801602052604090205461080390610f3a565b6001600160a01b03871660009081526002890160205260409020546108289083611141565b6108329190611141565b94505092959194509250565b6001600160a01b03821660009081526003840160205260408120548190819061086690610f3a565b6001600160a01b038616600090815260028801602052604090205461088b9190611141565b905060005b6001600160a01b0386166000908152600c88016020526040902054811015610a57576001600160a01b0386166000908152600c8801602052604081208054839081106108de576108de6112b3565b6000918252602090912001546001600160a01b03908116915086168114610a4e576040516370a0823160e01b81526001600160a01b03888116600483015260009182918416906370a0823190602401604080518083038186803b15801561094457600080fd5b505afa158015610958573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061097c91906112c9565b6001600160a01b038086166000908152600a8e016020908152604080832060048082015483516330204b1960e11b81529351989a50969850909693956109df95169363604096329383830193909290829003018186803b1580156106f057600080fd5b9050826109ec8583610fa8565b6109f69190611141565b610a009088611141565b9650610a3d670de0b6b3a76400008360010154610a2961075f8589610fa890919063ffffffff16565b610a339190611306565b610728919061133b565b610a479089611141565b9750505050505b50600101610890565b506040516370a0823160e01b81526001600160a01b03868116600483015260009182918716906370a0823190602401604080518083038186803b158015610a9d57600080fd5b505afa158015610ab1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ad591906112c9565b915091508160001415610aef576000945050505050610ba8565b6000808313610b31576001600160a01b0387166000908152600a8a016020526040902060010154610b2c9061072890670de0b6b3a7640000611182565b610b65565b6001600160a01b0387166000908152600a8a016020526040902060010154610b659061072890670de0b6b3a764000061134f565b90506000610b8c82610b868686610b7c8a8c611274565b610b869190611274565b90610fe8565b905060008112610b9c5780610b9f565b60005b96505050505050505b9392505050565b6000806000610bbe8786610f10565b15604051806040016040528060148152602001734a4f4a4f5f4143434f554e545f49535f5341464560601b81525090610c0a5760405162461bcd60e51b81526004016102db919061119a565b506040516370a0823160e01b81526001600160a01b038681166004830152600091908816906370a0823190602401604080518083038186803b158015610c4f57600080fd5b505afa158015610c63573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c8791906112c9565b5060408051808201909152601b81527f4a4f4a4f5f5452414445525f4841535f4e4f5f504f534954494f4e0000000000602082015290915081610cdd5760405162461bcd60e51b81526004016102db919061119a565b506000610cea82876111ef565b136040518060600160405280602581526020016113d76025913990610d225760405162461bcd60e51b81526004016102db919061119a565b50610d2c81610fc7565b610d3586610fc7565b11610d405784610d42565b805b6001600160a01b038089166000908152600a8b016020908152604080832060048082015483516330204b1960e11b81529351979b5091969495919091169363604096329383830193909290829003018186803b158015610da157600080fd5b505afa158015610db5573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd991906112ed565b90506000670de0b6b3a7640000836002015483610df69190611306565b610e00919061133b565b905060008713610e1957610e148183611182565b610e23565b610e23818361134f565b9150610e38610e3183610f3a565b8890610fa8565b610e44906000196111ef565b9550670de0b6b3a76400008360030154610e5d88610fc7565b610e679190611306565b610e71919061133b565b9450505050509450945094915050565b6001600160a01b038082166000908152600a84016020908152604080832060049081015482516330204b1960e11b815292519495169363604096329383830193909290829003018186803b158015610ed857600080fd5b505afa158015610eec573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ba891906112ed565b6000806000610f1f8585610563565b935050509150610f2e81610f3a565b90911215949350505050565b60006001600160ff1b03821115610fa45760405162461bcd60e51b815260206004820152602860248201527f53616665436173743a2076616c756520646f65736e27742066697420696e2061604482015267371034b73a191a9b60c11b60648201526084016102db565b5090565b6000670de0b6b3a7640000610fbd83856111ef565b610ba89190611366565b6000808212610fd65781610fe2565b610fe2826000196111ef565b92915050565b600081610fbd670de0b6b3a7640000856111ef565b80356001600160a01b038116811461101457600080fd5b919050565b6000806040838503121561102c57600080fd5b8235915061103c60208401610ffd565b90509250929050565b60008060008060008060c0878903121561105e57600080fd5b8635955061106e60208801610ffd565b945061107c60408801610ffd565b935061108a60608801610ffd565b925061109860808801610ffd565b915060a087013590509295509295509295565b6000806000606084860312156110c057600080fd5b833592506110d060208501610ffd565b91506110de60408501610ffd565b90509250925092565b600080600080608085870312156110fd57600080fd5b8435935061110d60208601610ffd565b925061111b60408601610ffd565b9396929550929360600135925050565b634e487b7160e01b600052601160045260246000fd5b600080821280156001600160ff1b03849003851316156111635761116361112b565b600160ff1b839003841281161561117c5761117c61112b565b50500190565b600082198211156111955761119561112b565b500190565b600060208083528351808285015260005b818110156111c7578581018301518582016040015282016111ab565b818111156111d9576000604083870101525b50601f01601f1916929092016040019392505050565b60006001600160ff1b03818413828413808216868404861116156112155761121561112b565b600160ff1b60008712828116878305891216156112345761123461112b565b600087129250878205871284841616156112505761125061112b565b878505871281841616156112665761126661112b565b505050929093029392505050565b60008083128015600160ff1b8501841216156112925761129261112b565b6001600160ff1b03840183138116156112ad576112ad61112b565b50500390565b634e487b7160e01b600052603260045260246000fd5b600080604083850312156112dc57600080fd5b505080516020909101519092909150565b6000602082840312156112ff57600080fd5b5051919050565b60008160001904831182151516156113205761132061112b565b500290565b634e487b7160e01b600052601260045260246000fd5b60008261134a5761134a611325565b500490565b6000828210156113615761136161112b565b500390565b60008261137557611375611325565b600160ff1b82146000198414161561138f5761138f61112b565b50059056fe4a4f4a4f5f494e56414c49445f4c49515549444154494f4e5f4558454355544f524a4f4a4f5f53454c465f4c49515549444154494f4e5f4e4f545f414c4c4f5745444a4f4a4f5f4c49515549444154494f4e5f524551554553545f414d4f554e545f57524f4e47a26469706673582212207e0a4d5bec7863f8d0c0c3bf10b93c7767a07a85ce36c8d607e13878a0acadea64736f6c63430008090033","sourceMap":"351:12488:20:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;12016:821;;;;;;;;;;-1:-1:-1;12016:821:20;;;;;:::i;:::-;;:::i;:::-;;9875:1893;;;;;;;;;;-1:-1:-1;9875:1893:20;;;;;:::i;:::-;;:::i;:::-;;;;1281:25:97;;;1337:2;1322:18;;1315:34;;;;1365:18;;;1358:34;1423:2;1408:18;;1401:34;1268:3;1253:19;9875:1893:20;;;;;;;;1262:1522;;;;;;:::i;:::-;;:::i;4509:3531::-;;;;;;:::i;:::-;;:::i;:::-;;;2359:25:97;;;2347:2;2332:18;4509:3531:20;2205:185:97;8206:1617:20;;;;;;:::i;:::-;;:::i;:::-;;;;3026:25:97;;;3082:2;3067:18;;3060:34;;;;3110:18;;;3103:34;3014:2;2999:18;8206:1617:20;2820:323:97;11774:236:20;;;;;;:::i;:::-;;:::i;12016:821::-;-1:-1:-1;;;;;12150:37:20;;;;;;:19;;;:37;;;;;:44;:49;:112;;;;;12216:46;12238:5;12245:16;12216:21;:46::i;:::-;12215:47;12150:112;12133:698;;;-1:-1:-1;;;;;12310:37:20;;;12287:20;12310:37;;;:19;;;:37;;;;;;;;;;12387:21;;;:39;;;;;;;12440:41;;;;12495:43;;;12572:15;;;;;;;12552:36;;;;;;;;:53;;12387:39;;12310:37;;12552:53;;12310:37;;12552:53;:::i;:::-;;;;-1:-1:-1;;12641:15:20;;;;-1:-1:-1;;;;;12641:15:20;12619:38;;;;:21;;;:38;;;;;:57;;12661:15;;12619:38;:57;;12661:15;;12619:57;:::i;:::-;;;;-1:-1:-1;;12695:125:20;;;3855:25:97;;;3911:2;3896:18;;3889:34;;;-1:-1:-1;;;;;12695:125:20;;;;;3828:18:97;12695:125:20;;;;;;;12273:558;;12133:698;12016:821;;:::o;9875:1893::-;10136:24;10174:25;10213:23;10250:24;10332:10;-1:-1:-1;;;;;10320:22:20;:8;-1:-1:-1;;;;;10320:22:20;;:86;;;-1:-1:-1;;;;;;10362:34:20;;;;;;;:22;;;:34;;;;;;;;:44;;;;;;;;;;;;10320:86;10420:35;;;;;;;;;;;;;;;;;10299:166;;;;;-1:-1:-1;;;10299:166:20;;;;;;;;:::i;:::-;;;;;;;;;;10516:10;-1:-1:-1;;;;;10496:30:20;:16;-1:-1:-1;;;;;10496:30:20;;;10540:35;;;;;;;;;;;;;;;;;10475:110;;;;;-1:-1:-1;;;10475:110:20;;;;;;;;:::i;:::-;;10595:20;10727:133;10765:5;10784:4;10802:16;10832:18;10727:24;:133::i;:::-;10625:235;;-1:-1:-1;10625:235:20;-1:-1:-1;10625:235:20;-1:-1:-1;10910:31:20;10625:235;10910:17;:31::i;:::-;10890:15;;;;-1:-1:-1;;;;;10890:15:20;10870:36;;;;:19;;;:36;;;;;:71;;:36;;;:71;;;;;:::i;:::-;;;;-1:-1:-1;11078:31:20;;-1:-1:-1;11096:12:20;11078:17;:31::i;:::-;11028:35;:18;-1:-1:-1;;11028:35:20;:::i;:::-;:81;;;;:::i;:::-;10996:113;-1:-1:-1;11138:22:20;:17;-1:-1:-1;;11138:22:20;:::i;:::-;11119:41;;11189:12;11204:5;:23;;:41;11228:16;-1:-1:-1;;;;;11204:41:20;-1:-1:-1;;;;;11204:41:20;;;;;;;;;;;;:47;11246:4;-1:-1:-1;;;;;11204:47:20;-1:-1:-1;;;;;11204:47:20;;;;;;;;;;;;;11189:62;;11261:20;11284:5;:23;;:35;11308:10;-1:-1:-1;;;;;11284:35:20;-1:-1:-1;;;;;11284:35:20;;;;;;;;;;;;:41;11320:4;-1:-1:-1;;;;;11284:41:20;-1:-1:-1;;;;;11284:41:20;;;;;;;;;;;;;11261:64;;11387:16;-1:-1:-1;;;;;11340:152:20;11369:4;-1:-1:-1;;;;;11340:152:20;;11417:16;11447:17;11478:4;11340:152;;;;;;;3026:25:97;;;3082:2;3067:18;;3060:34;;;;3125:2;3110:18;;3103:34;3014:2;2999:18;;2820:323;11340:152:20;;;;;;;;11507:186;;;3026:25:97;;;3082:2;3067:18;;3060:34;;;3110:18;;;3103:34;;;-1:-1:-1;;;;;11507:186:20;;;;;;;;;;;;;3014:2:97;2999:18;11507:186:20;;;;;;;11730:16;-1:-1:-1;;;;;11708:53:20;11724:4;-1:-1:-1;;;;;11708:53:20;;11748:12;11708:53;;;;2359:25:97;;2347:2;2332:18;;2205:185;11708:53:20;;;;;;;;10289:1479;;;9875:1893;;;;;;;;;;;:::o;1262:1522::-;1411:15;;;;;;1644:992;-1:-1:-1;;;;;1668:27:20;;;;;;:19;;;:27;;;;;:34;1664:38;;1644:992;;;-1:-1:-1;;;;;1792:27:20;;1721:18;1792:27;;;:19;;;:27;;;;;:30;;1721:18;;1792:27;1820:1;;1792:30;;;;;;:::i;:::-;;;;;;;;;;;1764:90;;-1:-1:-1;;;1764:90:20;;-1:-1:-1;;;;;6164:32:97;;;1764:90:20;;;6146:51:97;1792:30:20;;;;1764:82;;6119:18:97;;1764:90:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1720:134;;;;1868:31;1902:5;:20;;:82;1940:5;:19;;:27;1960:6;-1:-1:-1;;;;;1940:27:20;-1:-1:-1;;;;;1940:27:20;;;;;;;;;;;;1968:1;1940:30;;;;;;;;:::i;:::-;;;;;;;;;;;;;-1:-1:-1;;;;;1940:30:20;;;1902:82;;;;;;;;;;;;;;;2065:22;;;;;2048:55;;-1:-1:-1;;;2048:55:20;;;;1902:82;;-1:-1:-1;1940:30:20;;2013:104;;2065:22;;;2048:53;;:55;;;;1940:30;;2048:55;;;;;;;2065:22;2048:55;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;2013:17;:104::i;:::-;1998:119;-1:-1:-1;2184:12:20;2152:29;:11;1998:119;2152:22;:29::i;:::-;:44;;;;:::i;:::-;2132:64;;;;:::i;:::-;;-1:-1:-1;2210:25:20;2238:35;:29;:11;2261:5;2238:22;:29::i;:::-;:33;:35::i;:::-;2210:63;-1:-1:-1;2287:29:20;2210:63;2287:29;;:::i;:::-;;;5411:6:24;2388::20;:27;;;2368:17;:47;;;;:::i;:::-;2367:77;;;;:::i;:::-;2330:114;;;;:::i;:::-;2512:25;;2330:114;;-1:-1:-1;5411:6:24;;2492:45:20;;:17;:45;:::i;:::-;2491:75;;;;:::i;:::-;2458:108;;;;:::i;:::-;;;2608:3;;;;;1706:930;;;;;1644:992;;;-1:-1:-1;;;;;;2747:29:20;;;;;;:21;;;:29;;;;;;2729:48;;:17;:48::i;:::-;-1:-1:-1;;;;;2687:27:20;;;;;;:19;;;:27;;;;;;2656:58;;:16;:58;:::i;:::-;:121;;;;:::i;:::-;2645:132;;1545:1239;1262:1522;;;;;;;:::o;4509:3531::-;-1:-1:-1;;;;;6372:29:20;;4648:24;6372:29;;;:21;;;:29;;;;;;4648:24;;;;6354:48;;:17;:48::i;:::-;-1:-1:-1;;;;;6312:27:20;;;;;;:19;;;:27;;;;;;:90;;;;:::i;:::-;6289:113;;6417:9;6412:950;-1:-1:-1;;;;;6436:27:20;;;;;;:19;;;:27;;;;;:34;6432:38;;6412:950;;;-1:-1:-1;;;;;6500:27:20;;6488:9;6500:27;;;:19;;;:27;;;;;:30;;6528:1;;6500:30;;;;;;:::i;:::-;;;;;;;;;;;-1:-1:-1;;;;;6500:30:20;;;;-1:-1:-1;6548:9:20;;;;6544:749;;6689:31;;-1:-1:-1;;;6689:31:20;;-1:-1:-1;;;;;6164:32:97;;;6689:31:20;;;6146:51:97;6599:23:20;;;;6689;;;;;6119:18:97;;6689:31:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;6772:23:20;;;6738:31;6772:23;;;:20;;;:23;;;;;;;;6884:22;;;;;6867:55;;-1:-1:-1;;;6867:55:20;;;;6577:143;;-1:-1:-1;6577:143:20;;-1:-1:-1;6772:23:20;;6738:31;;6828:112;;6884:22;;6867:53;;:55;;;;6772:23;;6867:55;;;;;;6884:22;6867:55;;;;;;;;;;6828:112;6813:127;-1:-1:-1;7052:17:20;6995:34;:16;6813:127;6995:27;:34::i;:::-;:74;;;;:::i;:::-;6958:111;;;;:::i;:::-;;;7113:165;5411:6:24;7220::20;:27;;;7153:40;:34;7181:5;7153:16;:27;;:34;;;;:::i;:40::-;:94;;;;:::i;:::-;7152:108;;;;:::i;7113:165::-;7087:191;;;;:::i;:::-;;;6559:734;;;;6544:749;-1:-1:-1;7334:3:20;;6412:950;;;-1:-1:-1;7415:56:20;;-1:-1:-1;;;7415:56:20;;-1:-1:-1;;;;;6164:32:97;;;7415:56:20;;;6146:51:97;7372:18:20;;;;7415:26;;;;;6119:18:97;;7415:56:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;7371:100;;;;7485:11;7500:1;7485:16;7481:55;;;7524:1;7517:8;;;;;;;;7481:55;7545:17;7579:1;7565:11;:15;:261;;-1:-1:-1;;;;;7765:26:20;;;;;;:20;;;:26;;;;;:47;;;7718:108;;7753:59;;5411:6:24;7753:59:20;:::i;7718:108::-;7565:261;;;-1:-1:-1;;;;;7642:26:20;;;;;;:20;;;:26;;;;;:47;;;7595:108;;7630:59;;5411:6:24;7630:59:20;:::i;7595:108::-;7545:281;-1:-1:-1;7836:15:20;7854:126;7545:281;7854:103;7945:11;7920:12;7855:50;7892:13;7855:22;:50;:::i;:::-;:77;;;;:::i;:::-;7854:90;;:103::i;:126::-;7836:144;;8008:1;7997:8;:12;:36;;8024:8;7997:36;;;8012:1;7997:36;7990:43;;;;;;;;4509:3531;;;;;;:::o;8206:1617::-;8430:24;8468:25;8507:20;8604:34;8614:5;8621:16;8604:9;:34::i;:::-;8603:35;8640:22;;;;;;;;;;;;;-1:-1:-1;;;8640:22:20;;;8595:68;;;;;-1:-1:-1;;;8595:68:20;;;;;;;;:::i;:::-;-1:-1:-1;8774:66:20;;-1:-1:-1;;;8774:66:20;;-1:-1:-1;;;;;6164:32:97;;;8774:66:20;;;6146:51:97;8744:24:20;;8774:26;;;;;;6119:18:97;;8774:66:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;8882:29:20;;;;;;;;;;;;;;;;;8743:97;;-1:-1:-1;8858:22:20;8850:62;;;;-1:-1:-1;;;8850:62:20;;;;;;;;:::i;:::-;-1:-1:-1;8984:1:20;8943:38;8964:17;8943:18;:38;:::i;:::-;:42;8999:39;;;;;;;;;;;;;;;;;8922:126;;;;;-1:-1:-1;;;8922:126:20;;;;;;;;:::i;:::-;;9105:23;:17;:21;:23::i;:::-;9078:24;:18;:22;:24::i;:::-;:50;:115;;9175:18;9078:115;;;9143:17;9078:115;-1:-1:-1;;;;;9259:26:20;;;9225:31;9259:26;;;:20;;;:26;;;;;;;;9328:22;;;;;9311:55;;-1:-1:-1;;;9311:55:20;;;;9058:135;;-1:-1:-1;9259:26:20;;9225:31;;9328:22;;;;;9311:53;;:55;;;;9259:26;;9311:55;;;;;;9328:22;9311:55;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9295:71;;9376:19;5411:6:24;9407::20;:26;;;9399:5;:34;;;;:::i;:::-;9398:48;;;;:::i;:::-;9376:70;;9484:1;9464:17;:21;:89;;9534:19;9542:11;9534:5;:19;:::i;:::-;9464:89;;;9500:19;9508:11;9500:5;:19;:::i;:::-;9456:97;;9649:54;9678:24;9696:5;9678:17;:24::i;:::-;9649:17;;:28;:54::i;:::-;9632:71;;-1:-1:-1;;9632:71:20;:::i;:::-;9599:104;;5411:6:24;9768::20;:23;;;9741:24;:18;:22;:24::i;:::-;:50;;;;:::i;:::-;9740:76;;;;:::i;:::-;9713:103;;8542:1281;;;;8206:1617;;;;;;;;:::o;11774:236::-;-1:-1:-1;;;;;11932:26:20;;;11882:13;11932:26;;;:20;;;:26;;;;;;;;:42;;;;;11915:88;;-1:-1:-1;;;11915:88:20;;;;11882:13;;11932:42;;11915:86;;:88;;;;11932:26;;11915:88;;;;;;11932:42;11915:88;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;2790:286::-;2897:4;2914:15;2932:25;2973:31;2990:5;2997:6;2973:16;:31::i;:::-;2913:91;;;;;;3033:36;3051:17;3033;:36::i;:::-;3021:48;;;;;2790:286;-1:-1:-1;;;;2790:286:20:o;34781:297:81:-;34837:6;-1:-1:-1;;;;;34962:5:81;:34;;34954:87;;;;-1:-1:-1;;;34954:87:81;;7407:2:97;34954:87:81;;;7389:21:97;7446:2;7426:18;;;7419:30;7485:34;7465:18;;;7458:62;-1:-1:-1;;;7536:18:97;;;7529:38;7584:19;;34954:87:81;7205:404:97;34954:87:81;-1:-1:-1;35065:5:81;34781:297::o;224:114:44:-;287:6;211;313:5;317:1;313;:5;:::i;:::-;312:19;;;;:::i;464:115::-;510:7;540:1;536;:5;:36;;570:1;536:36;;;552:6;:1;-1:-1:-1;;552:6:44;:::i;:::-;529:43;464:115;-1:-1:-1;;464:115:44:o;344:114::-;407:6;450:1;433:13;211:6;433:1;:13;:::i;14:173:97:-;82:20;;-1:-1:-1;;;;;131:31:97;;121:42;;111:70;;177:1;174;167:12;111:70;14:173;;;:::o;192:278::-;284:6;292;345:2;333:9;324:7;320:23;316:32;313:52;;;361:1;358;351:12;313:52;397:9;384:23;374:33;;426:38;460:2;449:9;445:18;426:38;:::i;:::-;416:48;;192:278;;;;;:::o;475:570::-;602:6;610;618;626;634;642;695:3;683:9;674:7;670:23;666:33;663:53;;;712:1;709;702:12;663:53;748:9;735:23;725:33;;777:38;811:2;800:9;796:18;777:38;:::i;:::-;767:48;;834:38;868:2;857:9;853:18;834:38;:::i;:::-;824:48;;891:38;925:2;914:9;910:18;891:38;:::i;:::-;881:48;;948:39;982:3;971:9;967:19;948:39;:::i;:::-;938:49;;1034:3;1023:9;1019:19;1006:33;996:43;;475:570;;;;;;;;:::o;1848:352::-;1949:6;1957;1965;2018:2;2006:9;1997:7;1993:23;1989:32;1986:52;;;2034:1;2031;2024:12;1986:52;2070:9;2057:23;2047:33;;2099:38;2133:2;2122:9;2118:18;2099:38;:::i;:::-;2089:48;;2156:38;2190:2;2179:9;2175:18;2156:38;:::i;:::-;2146:48;;1848:352;;;;;:::o;2395:420::-;2504:6;2512;2520;2528;2581:3;2569:9;2560:7;2556:23;2552:33;2549:53;;;2598:1;2595;2588:12;2549:53;2634:9;2621:23;2611:33;;2663:38;2697:2;2686:9;2682:18;2663:38;:::i;:::-;2653:48;;2720:38;2754:2;2743:9;2739:18;2720:38;:::i;:::-;2395:420;;;;-1:-1:-1;2710:48:97;;2805:2;2790:18;2777:32;;-1:-1:-1;;2395:420:97:o;3148:127::-;3209:10;3204:3;3200:20;3197:1;3190:31;3240:4;3237:1;3230:15;3264:4;3261:1;3254:15;3280:265;3319:3;3347:9;;;3372:10;;-1:-1:-1;;;;;3391:27:97;;;3384:35;;3368:52;3365:78;;;3423:18;;:::i;:::-;-1:-1:-1;;;3470:19:97;;;3463:27;;3455:36;;3452:62;;;3494:18;;:::i;:::-;-1:-1:-1;;3530:9:97;;3280:265::o;3550:128::-;3590:3;3621:1;3617:6;3614:1;3611:13;3608:39;;;3627:18;;:::i;:::-;-1:-1:-1;3663:9:97;;3550:128::o;3934:597::-;4046:4;4075:2;4104;4093:9;4086:21;4136:6;4130:13;4179:6;4174:2;4163:9;4159:18;4152:34;4204:1;4214:140;4228:6;4225:1;4222:13;4214:140;;;4323:14;;;4319:23;;4313:30;4289:17;;;4308:2;4285:26;4278:66;4243:10;;4214:140;;;4372:6;4369:1;4366:13;4363:91;;;4442:1;4437:2;4428:6;4417:9;4413:22;4409:31;4402:42;4363:91;-1:-1:-1;4515:2:97;4494:15;-1:-1:-1;;4490:29:97;4475:45;;;;4522:2;4471:54;;3934:597;-1:-1:-1;;;3934:597:97:o;4536:553::-;4575:7;-1:-1:-1;;;;;4645:9:97;;;4673;;;4698:11;;;4717:10;;;4711:17;;4694:35;4691:61;;;4732:18;;:::i;:::-;-1:-1:-1;;;4808:1:97;4801:9;;4826:11;;;4846;;;4839:19;;4822:37;4819:63;;;4862:18;;:::i;:::-;4908:1;4905;4901:9;4891:19;;4955:1;4951:2;4946:11;4943:1;4939:19;4934:2;4930;4926:11;4922:37;4919:63;;;4962:18;;:::i;:::-;5027:1;5023:2;5018:11;5015:1;5011:19;5006:2;5002;4998:11;4994:37;4991:63;;;5034:18;;:::i;:::-;-1:-1:-1;;;5074:9:97;;;;;4536:553;-1:-1:-1;;;4536:553:97:o;5094:267::-;5133:4;5162:9;;;5187:10;;-1:-1:-1;;;5206:19:97;;5199:27;;5183:44;5180:70;;;5230:18;;:::i;:::-;-1:-1:-1;;;;;5277:27:97;;5270:35;;5262:44;;5259:70;;;5309:18;;:::i;:::-;-1:-1:-1;;5346:9:97;;5094:267::o;5868:127::-;5929:10;5924:3;5920:20;5917:1;5910:31;5960:4;5957:1;5950:15;5984:4;5981:1;5974:15;6208:243;6285:6;6293;6346:2;6334:9;6325:7;6321:23;6317:32;6314:52;;;6362:1;6359;6352:12;6314:52;-1:-1:-1;;6385:16:97;;6441:2;6426:18;;;6420:25;6385:16;;6420:25;;-1:-1:-1;6208:243:97:o;6456:184::-;6526:6;6579:2;6567:9;6558:7;6554:23;6550:32;6547:52;;;6595:1;6592;6585:12;6547:52;-1:-1:-1;6618:16:97;;6456:184;-1:-1:-1;6456:184:97:o;6645:168::-;6685:7;6751:1;6747;6743:6;6739:14;6736:1;6733:21;6728:1;6721:9;6714:17;6710:45;6707:71;;;6758:18;;:::i;:::-;-1:-1:-1;6798:9:97;;6645:168::o;6818:127::-;6879:10;6874:3;6870:20;6867:1;6860:31;6910:4;6907:1;6900:15;6934:4;6931:1;6924:15;6950:120;6990:1;7016;7006:35;;7021:18;;:::i;:::-;-1:-1:-1;7055:9:97;;6950:120::o;7075:125::-;7115:4;7143:1;7140;7137:8;7134:34;;;7148:18;;:::i;:::-;-1:-1:-1;7185:9:97;;7075:125::o;7614:193::-;7653:1;7679;7669:35;;7684:18;;:::i;:::-;-1:-1:-1;;;7720:18:97;;-1:-1:-1;;7740:13:97;;7716:38;7713:64;;;7757:18;;:::i;:::-;-1:-1:-1;7791:10:97;;7614:193::o","linkReferences":{}},"methodIdentifiers":{"getLiquidateCreditAmount(Types.State storage,address,address,int256)":"a67da8b0","getLiquidationPrice(Types.State storage,address,address)":"8bb9082c","getMarkPrice(Types.State storage,address)":"f4392a95","getTotalExposure(Types.State storage,address)":"471bd8a0","handleBadDebt(Types.State storage,address)":"35b270c8","requestLiquidation(Types.State storage,address,address,address,address,int256)":"39a9cd22"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"perp\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidatedTrader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"paperChange\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"creditChange\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionSerialNum\",\"type\":\"uint256\"}],\"name\":\"BeingLiquidated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"perp\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidatedTrader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"}],\"name\":\"ChargeInsurance\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidatedTrader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"primaryCredit\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"secondaryCredit\",\"type\":\"uint256\"}],\"name\":\"HandleBadDebt\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"perp\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidator\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidatedTrader\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"paperChange\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"creditChange\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionSerialNum\",\"type\":\"uint256\"}],\"name\":\"JoinLiquidation\",\"type\":\"event\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"getLiquidationPrice(Types.State storage,address,address)\":{\"returns\":{\"liquidationPrice\":\"It should be considered as the position can never be liquidated (absolutely safe) or being liquidated at the present if return 0.\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getLiquidateCreditAmount(Types.State storage,address,address,int256)\":{\"notice\":\"Using a fixed discount price model. Charge fee from liquidated trader. Will limit you liquidation request to the position size.\"},\"requestLiquidation(Types.State storage,address,address,address,address,int256)\":{\"notice\":\"execute a liquidation request\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/lib/Liquidation.sol\":\"Liquidation\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@mean-finance/=node_modules/@mean-finance/\",\":@openzeppelin/=node_modules/@openzeppelin/\",\":@rari-capital/=node_modules/@rari-capital/\",\":@uniswap/=node_modules/@uniswap/\",\":base64-sol/=node_modules/base64-sol/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":eth-gas-reporter/=node_modules/eth-gas-reporter/\",\":forge-std/=lib/forge-std/src/\",\":hardhat-deploy/=node_modules/hardhat-deploy/\",\":hardhat/=node_modules/hardhat/\"]},\"sources\":{\"contracts/intf/IMarkPriceSource.sol\":{\"keccak256\":\"0x4fed7ab51143676e39eee8f73d4cb77e5e58f45ac4bfa55d59b5ecf9d1ff2740\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://ef4c061c1878a4250736eb77337897e85bae3205d4f65c2e451de314429a6444\",\"dweb:/ipfs/QmVmtSm4YttaiwowmKfT51FANoeb9uU3SSTa58TD3NpE3J\"]},\"contracts/intf/IPerpetual.sol\":{\"keccak256\":\"0x5cb20445c3f9cce9d57c5823a2d9d3d51982786896d2a1c5b4fb59496a6091a5\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://7a76c41a8cddd3f9f7e0fab04eb620a41c2763fd4b6f10784e6c1a0b140b82a8\",\"dweb:/ipfs/QmPauywUAsrJEfuvocg3TSKhXkNiTVjBkuC484bzadi1JP\"]},\"contracts/lib/Liquidation.sol\":{\"keccak256\":\"0x6e57e943d174a94ccd8afd0b600bb31f9d7e37c5a9f1347152c5ff924c467dcc\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://87bf1b95a0dc12e1f6532a520ea3d6a2b02bd5f69e73b3efbebc1f6a63bfdcad\",\"dweb:/ipfs/QmTh6q6idZ5tSvJ8r6WEAKZYKmFvDMeRUJ2KPNm1VQTCV8\"]},\"contracts/lib/Position.sol\":{\"keccak256\":\"0x56ba57f9292b3936f4d5f9abb2e45e34489d161b2fb747ebab78050945935df6\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://8feed0f66b4a799cfbaea5307c2db19ce0f940140262b8fc47c3b00ac4f744ef\",\"dweb:/ipfs/QmYJ836q4ukyVycaTkrqGs5dfP6AjzHkrQYkow17YCLHer\"]},\"contracts/lib/Types.sol\":{\"keccak256\":\"0x86ebf76724a433dea625290e0418c09b40387a17ef2917e4bbd2ccbec808fc96\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://d3af2e85ca328ed8e48ba00610d96ec0fb93c9df7ca2246aea64d6230354e662\",\"dweb:/ipfs/QmajVy2FCZXsyTcJinNHSEBwaz3FG8crGTKQFks59JmvfD\"]},\"contracts/utils/Errors.sol\":{\"keccak256\":\"0xa4834efefa19e042a4e12c49b13fc2df3a98cc5dce985f5fe6ab60a17a58c1dd\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://a8200bb591858e7aeedc38aa0aba1126383949cf22bca1e50fda7076e9d6cbb8\",\"dweb:/ipfs/Qme45peKW4sXnJK1KGzAYJXYWZ8q9zvFSBtAyzNr6j86dU\"]},\"contracts/utils/SignedDecimalMath.sol\":{\"keccak256\":\"0x4f110110bfe52a17fabc6795279f971793c494eea40386ca7f454c9b66d14c22\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://13673ef58bc958e49f5c494a92631389c45f214745511013a2351c9a6337c6b0\",\"dweb:/ipfs/QmSrk5PNt7KnebJVhh9ZBp1fvbYyiebdMtQJ1QK4sSDbsU\"]},\"node_modules/@openzeppelin/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278\",\"dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.9+commit.e5eed63a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"perp","type":"address","indexed":true},{"internalType":"address","name":"liquidatedTrader","type":"address","indexed":true},{"internalType":"int256","name":"paperChange","type":"int256","indexed":false},{"internalType":"int256","name":"creditChange","type":"int256","indexed":false},{"internalType":"uint256","name":"positionSerialNum","type":"uint256","indexed":false}],"type":"event","name":"BeingLiquidated","anonymous":false},{"inputs":[{"internalType":"address","name":"perp","type":"address","indexed":true},{"internalType":"address","name":"liquidatedTrader","type":"address","indexed":true},{"internalType":"uint256","name":"fee","type":"uint256","indexed":false}],"type":"event","name":"ChargeInsurance","anonymous":false},{"inputs":[{"internalType":"address","name":"liquidatedTrader","type":"address","indexed":true},{"internalType":"int256","name":"primaryCredit","type":"int256","indexed":false},{"internalType":"uint256","name":"secondaryCredit","type":"uint256","indexed":false}],"type":"event","name":"HandleBadDebt","anonymous":false},{"inputs":[{"internalType":"address","name":"perp","type":"address","indexed":true},{"internalType":"address","name":"liquidator","type":"address","indexed":true},{"internalType":"address","name":"liquidatedTrader","type":"address","indexed":true},{"internalType":"int256","name":"paperChange","type":"int256","indexed":false},{"internalType":"int256","name":"creditChange","type":"int256","indexed":false},{"internalType":"uint256","name":"positionSerialNum","type":"uint256","indexed":false}],"type":"event","name":"JoinLiquidation","anonymous":false}],"devdoc":{"kind":"dev","methods":{"getLiquidationPrice(Types.State storage,address,address)":{"returns":{"liquidationPrice":"It should be considered as the position can never be liquidated (absolutely safe) or being liquidated at the present if return 0."}}},"version":1},"userdoc":{"kind":"user","methods":{"getLiquidateCreditAmount(Types.State storage,address,address,int256)":{"notice":"Using a fixed discount price model. Charge fee from liquidated trader. Will limit you liquidation request to the position size."},"requestLiquidation(Types.State storage,address,address,address,address,int256)":{"notice":"execute a liquidation request"}},"version":1}},"settings":{"remappings":["@mean-finance/=node_modules/@mean-finance/","@openzeppelin/=node_modules/@openzeppelin/","@rari-capital/=node_modules/@rari-capital/","@uniswap/=node_modules/@uniswap/","base64-sol/=node_modules/base64-sol/","ds-test/=lib/forge-std/lib/ds-test/src/","eth-gas-reporter/=node_modules/eth-gas-reporter/","forge-std/=lib/forge-std/src/","hardhat-deploy/=node_modules/hardhat-deploy/","hardhat/=node_modules/hardhat/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/lib/Liquidation.sol":"Liquidation"},"libraries":{}},"sources":{"contracts/intf/IMarkPriceSource.sol":{"keccak256":"0x4fed7ab51143676e39eee8f73d4cb77e5e58f45ac4bfa55d59b5ecf9d1ff2740","urls":["bzz-raw://ef4c061c1878a4250736eb77337897e85bae3205d4f65c2e451de314429a6444","dweb:/ipfs/QmVmtSm4YttaiwowmKfT51FANoeb9uU3SSTa58TD3NpE3J"],"license":"BUSL-1.1"},"contracts/intf/IPerpetual.sol":{"keccak256":"0x5cb20445c3f9cce9d57c5823a2d9d3d51982786896d2a1c5b4fb59496a6091a5","urls":["bzz-raw://7a76c41a8cddd3f9f7e0fab04eb620a41c2763fd4b6f10784e6c1a0b140b82a8","dweb:/ipfs/QmPauywUAsrJEfuvocg3TSKhXkNiTVjBkuC484bzadi1JP"],"license":"BUSL-1.1"},"contracts/lib/Liquidation.sol":{"keccak256":"0x6e57e943d174a94ccd8afd0b600bb31f9d7e37c5a9f1347152c5ff924c467dcc","urls":["bzz-raw://87bf1b95a0dc12e1f6532a520ea3d6a2b02bd5f69e73b3efbebc1f6a63bfdcad","dweb:/ipfs/QmTh6q6idZ5tSvJ8r6WEAKZYKmFvDMeRUJ2KPNm1VQTCV8"],"license":"BUSL-1.1"},"contracts/lib/Position.sol":{"keccak256":"0x56ba57f9292b3936f4d5f9abb2e45e34489d161b2fb747ebab78050945935df6","urls":["bzz-raw://8feed0f66b4a799cfbaea5307c2db19ce0f940140262b8fc47c3b00ac4f744ef","dweb:/ipfs/QmYJ836q4ukyVycaTkrqGs5dfP6AjzHkrQYkow17YCLHer"],"license":"BUSL-1.1"},"contracts/lib/Types.sol":{"keccak256":"0x86ebf76724a433dea625290e0418c09b40387a17ef2917e4bbd2ccbec808fc96","urls":["bzz-raw://d3af2e85ca328ed8e48ba00610d96ec0fb93c9df7ca2246aea64d6230354e662","dweb:/ipfs/QmajVy2FCZXsyTcJinNHSEBwaz3FG8crGTKQFks59JmvfD"],"license":"BUSL-1.1"},"contracts/utils/Errors.sol":{"keccak256":"0xa4834efefa19e042a4e12c49b13fc2df3a98cc5dce985f5fe6ab60a17a58c1dd","urls":["bzz-raw://a8200bb591858e7aeedc38aa0aba1126383949cf22bca1e50fda7076e9d6cbb8","dweb:/ipfs/Qme45peKW4sXnJK1KGzAYJXYWZ8q9zvFSBtAyzNr6j86dU"],"license":"BUSL-1.1"},"contracts/utils/SignedDecimalMath.sol":{"keccak256":"0x4f110110bfe52a17fabc6795279f971793c494eea40386ca7f454c9b66d14c22","urls":["bzz-raw://13673ef58bc958e49f5c494a92631389c45f214745511013a2351c9a6337c6b0","dweb:/ipfs/QmSrk5PNt7KnebJVhh9ZBp1fvbYyiebdMtQJ1QK4sSDbsU"],"license":"BUSL-1.1"},"node_modules/@openzeppelin/contracts/utils/math/SafeCast.sol":{"keccak256":"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad","urls":["bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278","dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"contracts/lib/Liquidation.sol","id":4595,"exportedSymbols":{"Errors":[9268],"IMarkPriceSource":[2882],"IPerpetual":[2929],"Liquidation":[4594],"Position":[5259],"SafeCast":[58678],"SignedDecimalMath":[9335],"Types":[6020]},"nodeType":"SourceUnit","src":"78:12762:20","nodes":[{"id":3690,"nodeType":"PragmaDirective","src":"78:22:20","nodes":[],"literals":["solidity","0.8",".9"]},{"id":3691,"nodeType":"ImportDirective","src":"102:57:20","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts/utils/math/SafeCast.sol","file":"@openzeppelin/contracts/utils/math/SafeCast.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":58679,"symbolAliases":[],"unitAlias":""},{"id":3692,"nodeType":"ImportDirective","src":"160:32:20","nodes":[],"absolutePath":"contracts/intf/IPerpetual.sol","file":"../intf/IPerpetual.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":2930,"symbolAliases":[],"unitAlias":""},{"id":3693,"nodeType":"ImportDirective","src":"193:38:20","nodes":[],"absolutePath":"contracts/intf/IMarkPriceSource.sol","file":"../intf/IMarkPriceSource.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":2883,"symbolAliases":[],"unitAlias":""},{"id":3694,"nodeType":"ImportDirective","src":"232:40:20","nodes":[],"absolutePath":"contracts/utils/SignedDecimalMath.sol","file":"../utils/SignedDecimalMath.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":9336,"symbolAliases":[],"unitAlias":""},{"id":3695,"nodeType":"ImportDirective","src":"273:29:20","nodes":[],"absolutePath":"contracts/utils/Errors.sol","file":"../utils/Errors.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":9269,"symbolAliases":[],"unitAlias":""},{"id":3696,"nodeType":"ImportDirective","src":"303:21:20","nodes":[],"absolutePath":"contracts/lib/Types.sol","file":"./Types.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":6021,"symbolAliases":[],"unitAlias":""},{"id":3697,"nodeType":"ImportDirective","src":"325:24:20","nodes":[],"absolutePath":"contracts/lib/Position.sol","file":"./Position.sol","nameLocation":"-1:-1:-1","scope":4595,"sourceUnit":5260,"symbolAliases":[],"unitAlias":""},{"id":4594,"nodeType":"ContractDefinition","src":"351:12488:20","nodes":[{"id":3700,"nodeType":"UsingForDirective","src":"377:35:20","nodes":[],"libraryName":{"id":3698,"name":"SignedDecimalMath","nodeType":"IdentifierPath","referencedDeclaration":9335,"src":"383:17:20"},"typeName":{"id":3699,"name":"int256","nodeType":"ElementaryTypeName","src":"405:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":3712,"nodeType":"EventDefinition","src":"455:192:20","nodes":[],"anonymous":false,"name":"BeingLiquidated","nameLocation":"461:15:20","parameters":{"id":3711,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3702,"indexed":true,"mutability":"mutable","name":"perp","nameLocation":"502:4:20","nodeType":"VariableDeclaration","scope":3712,"src":"486:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3701,"name":"address","nodeType":"ElementaryTypeName","src":"486:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3704,"indexed":true,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"532:16:20","nodeType":"VariableDeclaration","scope":3712,"src":"516:32:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3703,"name":"address","nodeType":"ElementaryTypeName","src":"516:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3706,"indexed":false,"mutability":"mutable","name":"paperChange","nameLocation":"565:11:20","nodeType":"VariableDeclaration","scope":3712,"src":"558:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3705,"name":"int256","nodeType":"ElementaryTypeName","src":"558:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3708,"indexed":false,"mutability":"mutable","name":"creditChange","nameLocation":"593:12:20","nodeType":"VariableDeclaration","scope":3712,"src":"586:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3707,"name":"int256","nodeType":"ElementaryTypeName","src":"586:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3710,"indexed":false,"mutability":"mutable","name":"positionSerialNum","nameLocation":"623:17:20","nodeType":"VariableDeclaration","scope":3712,"src":"615:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3709,"name":"uint256","nodeType":"ElementaryTypeName","src":"615:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"476:170:20"}},{"id":3726,"nodeType":"EventDefinition","src":"653:228:20","nodes":[],"anonymous":false,"name":"JoinLiquidation","nameLocation":"659:15:20","parameters":{"id":3725,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3714,"indexed":true,"mutability":"mutable","name":"perp","nameLocation":"700:4:20","nodeType":"VariableDeclaration","scope":3726,"src":"684:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3713,"name":"address","nodeType":"ElementaryTypeName","src":"684:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3716,"indexed":true,"mutability":"mutable","name":"liquidator","nameLocation":"730:10:20","nodeType":"VariableDeclaration","scope":3726,"src":"714:26:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3715,"name":"address","nodeType":"ElementaryTypeName","src":"714:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3718,"indexed":true,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"766:16:20","nodeType":"VariableDeclaration","scope":3726,"src":"750:32:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3717,"name":"address","nodeType":"ElementaryTypeName","src":"750:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3720,"indexed":false,"mutability":"mutable","name":"paperChange","nameLocation":"799:11:20","nodeType":"VariableDeclaration","scope":3726,"src":"792:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3719,"name":"int256","nodeType":"ElementaryTypeName","src":"792:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3722,"indexed":false,"mutability":"mutable","name":"creditChange","nameLocation":"827:12:20","nodeType":"VariableDeclaration","scope":3726,"src":"820:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3721,"name":"int256","nodeType":"ElementaryTypeName","src":"820:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3724,"indexed":false,"mutability":"mutable","name":"positionSerialNum","nameLocation":"857:17:20","nodeType":"VariableDeclaration","scope":3726,"src":"849:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3723,"name":"uint256","nodeType":"ElementaryTypeName","src":"849:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"674:206:20"}},{"id":3734,"nodeType":"EventDefinition","src":"948:121:20","nodes":[],"anonymous":false,"name":"ChargeInsurance","nameLocation":"954:15:20","parameters":{"id":3733,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3728,"indexed":true,"mutability":"mutable","name":"perp","nameLocation":"995:4:20","nodeType":"VariableDeclaration","scope":3734,"src":"979:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3727,"name":"address","nodeType":"ElementaryTypeName","src":"979:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3730,"indexed":true,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"1025:16:20","nodeType":"VariableDeclaration","scope":3734,"src":"1009:32:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3729,"name":"address","nodeType":"ElementaryTypeName","src":"1009:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3732,"indexed":false,"mutability":"mutable","name":"fee","nameLocation":"1059:3:20","nodeType":"VariableDeclaration","scope":3734,"src":"1051:11:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3731,"name":"uint256","nodeType":"ElementaryTypeName","src":"1051:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"969:99:20"}},{"id":3742,"nodeType":"EventDefinition","src":"1075:131:20","nodes":[],"anonymous":false,"name":"HandleBadDebt","nameLocation":"1081:13:20","parameters":{"id":3741,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3736,"indexed":true,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"1120:16:20","nodeType":"VariableDeclaration","scope":3742,"src":"1104:32:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3735,"name":"address","nodeType":"ElementaryTypeName","src":"1104:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":3738,"indexed":false,"mutability":"mutable","name":"primaryCredit","nameLocation":"1153:13:20","nodeType":"VariableDeclaration","scope":3742,"src":"1146:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3737,"name":"int256","nodeType":"ElementaryTypeName","src":"1146:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3740,"indexed":false,"mutability":"mutable","name":"secondaryCredit","nameLocation":"1184:15:20","nodeType":"VariableDeclaration","scope":3742,"src":"1176:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3739,"name":"uint256","nodeType":"ElementaryTypeName","src":"1176:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1094:111:20"}},{"id":3883,"nodeType":"FunctionDefinition","src":"1262:1522:20","nodes":[],"body":{"id":3882,"nodeType":"Block","src":"1545:1239:20","nodes":[],"statements":[{"assignments":[3759],"declarations":[{"constant":false,"id":3759,"mutability":"mutable","name":"netPositionValue","nameLocation":"1562:16:20","nodeType":"VariableDeclaration","scope":3882,"src":"1555:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3758,"name":"int256","nodeType":"ElementaryTypeName","src":"1555:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":3760,"nodeType":"VariableDeclarationStatement","src":"1555:23:20"},{"body":{"id":3863,"nodeType":"Block","src":"1706:930:20","statements":[{"assignments":[3773,3775],"declarations":[{"constant":false,"id":3773,"mutability":"mutable","name":"paperAmount","nameLocation":"1728:11:20","nodeType":"VariableDeclaration","scope":3863,"src":"1721:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3772,"name":"int256","nodeType":"ElementaryTypeName","src":"1721:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3775,"mutability":"mutable","name":"creditAmount","nameLocation":"1748:12:20","nodeType":"VariableDeclaration","scope":3863,"src":"1741:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3774,"name":"int256","nodeType":"ElementaryTypeName","src":"1741:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":3787,"initialValue":{"arguments":[{"id":3785,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"1847:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"baseExpression":{"baseExpression":{"expression":{"id":3777,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"1792:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3778,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"1792:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":3780,"indexExpression":{"id":3779,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"1812:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1792:27:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":3782,"indexExpression":{"id":3781,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3762,"src":"1820:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1792:30:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":3776,"name":"IPerpetual","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2929,"src":"1764:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPerpetual_$2929_$","typeString":"type(contract IPerpetual)"}},"id":3783,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1764:72:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPerpetual_$2929","typeString":"contract IPerpetual"}},"id":3784,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":2894,"src":"1764:82:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_int256_$_t_int256_$","typeString":"function (address) view external returns (int256,int256)"}},"id":3786,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1764:90:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$","typeString":"tuple(int256,int256)"}},"nodeType":"VariableDeclarationStatement","src":"1720:134:20"},{"assignments":[3792],"declarations":[{"constant":false,"id":3792,"mutability":"mutable","name":"params","nameLocation":"1893:6:20","nodeType":"VariableDeclaration","scope":3863,"src":"1868:31:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"},"typeName":{"id":3791,"nodeType":"UserDefinedTypeName","pathNode":{"id":3790,"name":"Types.RiskParams","nodeType":"IdentifierPath","referencedDeclaration":6002,"src":"1868:16:20"},"referencedDeclaration":6002,"src":"1868:16:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"}},"visibility":"internal"}],"id":3802,"initialValue":{"baseExpression":{"expression":{"id":3793,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"1902:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3794,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"1902:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":3801,"indexExpression":{"baseExpression":{"baseExpression":{"expression":{"id":3795,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"1940:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3796,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"1940:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":3798,"indexExpression":{"id":3797,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"1960:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1940:27:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":3800,"indexExpression":{"id":3799,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3762,"src":"1968:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1940:30:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1902:82:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"nodeType":"VariableDeclarationStatement","src":"1868:116:20"},{"assignments":[3804],"declarations":[{"constant":false,"id":3804,"mutability":"mutable","name":"price","nameLocation":"2005:5:20","nodeType":"VariableDeclaration","scope":3863,"src":"1998:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3803,"name":"int256","nodeType":"ElementaryTypeName","src":"1998:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":3814,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"id":3808,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3792,"src":"2065:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":3809,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"markPriceSource","nodeType":"MemberAccess","referencedDeclaration":5997,"src":"2065:22:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":3807,"name":"IMarkPriceSource","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2882,"src":"2048:16:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IMarkPriceSource_$2882_$","typeString":"type(contract IMarkPriceSource)"}},"id":3810,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2048:40:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IMarkPriceSource_$2882","typeString":"contract IMarkPriceSource"}},"id":3811,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getMarkPrice","nodeType":"MemberAccess","referencedDeclaration":2881,"src":"2048:53:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint256_$","typeString":"function () view external returns (uint256)"}},"id":3812,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2048:55:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3805,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"2013:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3806,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"2013:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3813,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2013:104:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"1998:119:20"},{"expression":{"id":3822,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":3815,"name":"netPositionValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3759,"src":"2132:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3821,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":3818,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3804,"src":"2175:5:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"id":3816,"name":"paperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3773,"src":"2152:11:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":3817,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalMul","nodeType":"MemberAccess","referencedDeclaration":9293,"src":"2152:22:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":3819,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2152:29:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":3820,"name":"creditAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3775,"src":"2184:12:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"2152:44:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"2132:64:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":3823,"nodeType":"ExpressionStatement","src":"2132:64:20"},{"assignments":[3825],"declarations":[{"constant":false,"id":3825,"mutability":"mutable","name":"exposureIncrement","nameLocation":"2218:17:20","nodeType":"VariableDeclaration","scope":3863,"src":"2210:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3824,"name":"uint256","nodeType":"ElementaryTypeName","src":"2210:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":3832,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"id":3828,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3804,"src":"2261:5:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"id":3826,"name":"paperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3773,"src":"2238:11:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":3827,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalMul","nodeType":"MemberAccess","referencedDeclaration":9293,"src":"2238:22:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":3829,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2238:29:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":3830,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"abs","nodeType":"MemberAccess","referencedDeclaration":9334,"src":"2238:33:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_uint256_$bound_to$_t_int256_$","typeString":"function (int256) pure returns (uint256)"}},"id":3831,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2238:35:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2210:63:20"},{"expression":{"id":3835,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":3833,"name":"exposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3752,"src":"2287:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":3834,"name":"exposureIncrement","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3825,"src":"2299:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2287:29:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":3836,"nodeType":"ExpressionStatement","src":"2287:29:20"},{"expression":{"id":3846,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":3837,"name":"maintenanceMargin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3756,"src":"2330:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3845,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3841,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3838,"name":"exposureIncrement","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3825,"src":"2368:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":3839,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3792,"src":"2388:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":3840,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"liquidationThreshold","nodeType":"MemberAccess","referencedDeclaration":5991,"src":"2388:27:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2368:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":3842,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2367:49:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"expression":{"id":3843,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"2435:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":3844,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"2435:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2367:77:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2330:114:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":3847,"nodeType":"ExpressionStatement","src":"2330:114:20"},{"expression":{"id":3857,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":3848,"name":"initialMargin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3754,"src":"2458:13:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3856,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3852,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3849,"name":"exposureIncrement","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3825,"src":"2492:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":3850,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3792,"src":"2512:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":3851,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"initialMarginRatio","nodeType":"MemberAccess","referencedDeclaration":5989,"src":"2512:25:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2492:45:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":3853,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2491:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"expression":{"id":3854,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"2557:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":3855,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"2557:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2491:75:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2458:108:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":3858,"nodeType":"ExpressionStatement","src":"2458:108:20"},{"id":3862,"nodeType":"UncheckedBlock","src":"2580:46:20","statements":[{"expression":{"id":3860,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"2608:3:20","subExpression":{"id":3859,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3762,"src":"2610:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":3861,"nodeType":"ExpressionStatement","src":"2608:3:20"}]}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3771,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3765,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3762,"src":"1664:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"baseExpression":{"expression":{"id":3766,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"1668:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3767,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"1668:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":3769,"indexExpression":{"id":3768,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"1688:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1668:27:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":3770,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","src":"1668:34:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1664:38:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":3864,"initializationExpression":{"assignments":[3762],"declarations":[{"constant":false,"id":3762,"mutability":"mutable","name":"i","nameLocation":"1657:1:20","nodeType":"VariableDeclaration","scope":3864,"src":"1649:9:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3761,"name":"uint256","nodeType":"ElementaryTypeName","src":"1649:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":3764,"initialValue":{"hexValue":"30","id":3763,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1661:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"1649:13:20"},"nodeType":"ForStatement","src":"1644:992:20"},{"expression":{"id":3880,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":3865,"name":"netValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3750,"src":"2645:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3879,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3871,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3866,"name":"netPositionValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3759,"src":"2656:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"baseExpression":{"expression":{"id":3867,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"2687:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3868,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"2687:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":3870,"indexExpression":{"id":3869,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"2707:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2687:27:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"2656:58:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"baseExpression":{"expression":{"id":3874,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3745,"src":"2747:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3875,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"2747:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":3877,"indexExpression":{"id":3876,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3747,"src":"2769:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2747:29:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3872,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"2729:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3873,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"2729:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3878,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2729:48:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"2656:121:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"2645:132:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":3881,"nodeType":"ExpressionStatement","src":"2645:132:20"}]},"functionSelector":"471bd8a0","implemented":true,"kind":"function","modifiers":[],"name":"getTotalExposure","nameLocation":"1271:16:20","parameters":{"id":3748,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3745,"mutability":"mutable","name":"state","nameLocation":"1317:5:20","nodeType":"VariableDeclaration","scope":3883,"src":"1297:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":3744,"nodeType":"UserDefinedTypeName","pathNode":{"id":3743,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"1297:11:20"},"referencedDeclaration":5971,"src":"1297:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":3747,"mutability":"mutable","name":"trader","nameLocation":"1340:6:20","nodeType":"VariableDeclaration","scope":3883,"src":"1332:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3746,"name":"address","nodeType":"ElementaryTypeName","src":"1332:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1287:65:20"},"returnParameters":{"id":3757,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3750,"mutability":"mutable","name":"netValue","nameLocation":"1418:8:20","nodeType":"VariableDeclaration","scope":3883,"src":"1411:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3749,"name":"int256","nodeType":"ElementaryTypeName","src":"1411:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":3752,"mutability":"mutable","name":"exposure","nameLocation":"1448:8:20","nodeType":"VariableDeclaration","scope":3883,"src":"1440:16:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3751,"name":"uint256","nodeType":"ElementaryTypeName","src":"1440:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":3754,"mutability":"mutable","name":"initialMargin","nameLocation":"1478:13:20","nodeType":"VariableDeclaration","scope":3883,"src":"1470:21:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3753,"name":"uint256","nodeType":"ElementaryTypeName","src":"1470:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":3756,"mutability":"mutable","name":"maintenanceMargin","nameLocation":"1513:17:20","nodeType":"VariableDeclaration","scope":3883,"src":"1505:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3755,"name":"uint256","nodeType":"ElementaryTypeName","src":"1505:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1397:143:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":3910,"nodeType":"FunctionDefinition","src":"2790:286:20","nodes":[],"body":{"id":3909,"nodeType":"Block","src":"2903:173:20","nodes":[],"statements":[{"assignments":[3894,null,null,3896],"declarations":[{"constant":false,"id":3894,"mutability":"mutable","name":"netValue","nameLocation":"2921:8:20","nodeType":"VariableDeclaration","scope":3909,"src":"2914:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3893,"name":"int256","nodeType":"ElementaryTypeName","src":"2914:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null,null,{"constant":false,"id":3896,"mutability":"mutable","name":"maintenanceMargin","nameLocation":"2940:17:20","nodeType":"VariableDeclaration","scope":3909,"src":"2932:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3895,"name":"uint256","nodeType":"ElementaryTypeName","src":"2932:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":3901,"initialValue":{"arguments":[{"id":3898,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3886,"src":"2990:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":3899,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3888,"src":"2997:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"id":3897,"name":"getTotalExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3883,"src":"2973:16:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (struct Types.State storage pointer,address) view returns (int256,uint256,uint256,uint256)"}},"id":3900,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2973:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(int256,uint256,uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"2913:91:20"},{"expression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3907,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3902,"name":"netValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3894,"src":"3021:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"arguments":[{"id":3905,"name":"maintenanceMargin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3896,"src":"3051:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3903,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"3033:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3904,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"3033:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3906,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3033:36:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"3021:48:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":3892,"id":3908,"nodeType":"Return","src":"3014:55:20"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_isMMSafe","nameLocation":"2799:9:20","parameters":{"id":3889,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3886,"mutability":"mutable","name":"state","nameLocation":"2838:5:20","nodeType":"VariableDeclaration","scope":3910,"src":"2818:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":3885,"nodeType":"UserDefinedTypeName","pathNode":{"id":3884,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"2818:11:20"},"referencedDeclaration":5971,"src":"2818:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":3888,"mutability":"mutable","name":"trader","nameLocation":"2861:6:20","nodeType":"VariableDeclaration","scope":3910,"src":"2853:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3887,"name":"address","nodeType":"ElementaryTypeName","src":"2853:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2808:65:20"},"returnParameters":{"id":3892,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3891,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":3910,"src":"2897:4:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":3890,"name":"bool","nodeType":"ElementaryTypeName","src":"2897:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"2896:6:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":3937,"nodeType":"FunctionDefinition","src":"3082:278:20","nodes":[],"body":{"id":3936,"nodeType":"Block","src":"3195:165:20","nodes":[],"statements":[{"assignments":[3921,null,3923,null],"declarations":[{"constant":false,"id":3921,"mutability":"mutable","name":"netValue","nameLocation":"3213:8:20","nodeType":"VariableDeclaration","scope":3936,"src":"3206:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3920,"name":"int256","nodeType":"ElementaryTypeName","src":"3206:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null,{"constant":false,"id":3923,"mutability":"mutable","name":"initialMargin","nameLocation":"3231:13:20","nodeType":"VariableDeclaration","scope":3936,"src":"3223:21:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3922,"name":"uint256","nodeType":"ElementaryTypeName","src":"3223:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},null],"id":3928,"initialValue":{"arguments":[{"id":3925,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3913,"src":"3278:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":3926,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3915,"src":"3285:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"id":3924,"name":"getTotalExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3883,"src":"3261:16:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (struct Types.State storage pointer,address) view returns (int256,uint256,uint256,uint256)"}},"id":3927,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3261:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(int256,uint256,uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"3205:87:20"},{"expression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3934,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3929,"name":"netValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3921,"src":"3309:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"arguments":[{"id":3932,"name":"initialMargin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3923,"src":"3339:13:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3930,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"3321:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3931,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"3321:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3933,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3321:32:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"3309:44:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":3919,"id":3935,"nodeType":"Return","src":"3302:51:20"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_isIMSafe","nameLocation":"3091:9:20","parameters":{"id":3916,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3913,"mutability":"mutable","name":"state","nameLocation":"3130:5:20","nodeType":"VariableDeclaration","scope":3937,"src":"3110:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":3912,"nodeType":"UserDefinedTypeName","pathNode":{"id":3911,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"3110:11:20"},"referencedDeclaration":5971,"src":"3110:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":3915,"mutability":"mutable","name":"trader","nameLocation":"3153:6:20","nodeType":"VariableDeclaration","scope":3937,"src":"3145:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3914,"name":"address","nodeType":"ElementaryTypeName","src":"3145:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3100:65:20"},"returnParameters":{"id":3919,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3918,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":3937,"src":"3189:4:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":3917,"name":"bool","nodeType":"ElementaryTypeName","src":"3189:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3188:6:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":3977,"nodeType":"FunctionDefinition","src":"3535:375:20","nodes":[],"body":{"id":3976,"nodeType":"Block","src":"3653:257:20","nodes":[],"statements":[{"assignments":[3949,null,3951,null],"declarations":[{"constant":false,"id":3949,"mutability":"mutable","name":"netValue","nameLocation":"3671:8:20","nodeType":"VariableDeclaration","scope":3976,"src":"3664:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":3948,"name":"int256","nodeType":"ElementaryTypeName","src":"3664:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null,{"constant":false,"id":3951,"mutability":"mutable","name":"initialMargin","nameLocation":"3689:13:20","nodeType":"VariableDeclaration","scope":3976,"src":"3681:21:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3950,"name":"uint256","nodeType":"ElementaryTypeName","src":"3681:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},null],"id":3956,"initialValue":{"arguments":[{"id":3953,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3941,"src":"3736:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":3954,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3943,"src":"3743:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"id":3952,"name":"getTotalExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3883,"src":"3719:16:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (struct Types.State storage pointer,address) view returns (int256,uint256,uint256,uint256)"}},"id":3955,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3719:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(int256,uint256,uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"3663:87:20"},{"expression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":3974,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3967,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3965,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3957,"name":"netValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3949,"src":"3779:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"baseExpression":{"expression":{"id":3960,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3941,"src":"3808:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":3961,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"3808:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":3963,"indexExpression":{"id":3962,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3943,"src":"3830:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3808:29:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3958,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"3790:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3959,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"3790:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3964,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3790:48:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"3779:59:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"hexValue":"30","id":3966,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3842:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3779:64:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":3973,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3968,"name":"netValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3949,"src":"3859:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"arguments":[{"id":3971,"name":"initialMargin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3951,"src":"3889:13:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":3969,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"3871:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":3970,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"3871:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":3972,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3871:32:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"3859:44:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3779:124:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":3947,"id":3975,"nodeType":"Return","src":"3760:143:20"}]},"documentation":{"id":3938,"nodeType":"StructuredDocumentation","src":"3366:164:20","text":"@notice More strict than _isIMSafe.\n Additional requirement: netPositionValue + primaryCredit >= 0\n used when traders transfer out primary credit."},"implemented":true,"kind":"function","modifiers":[],"name":"_isSolidIMSafe","nameLocation":"3544:14:20","parameters":{"id":3944,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3941,"mutability":"mutable","name":"state","nameLocation":"3588:5:20","nodeType":"VariableDeclaration","scope":3977,"src":"3568:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":3940,"nodeType":"UserDefinedTypeName","pathNode":{"id":3939,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"3568:11:20"},"referencedDeclaration":5971,"src":"3568:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":3943,"mutability":"mutable","name":"trader","nameLocation":"3611:6:20","nodeType":"VariableDeclaration","scope":3977,"src":"3603:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3942,"name":"address","nodeType":"ElementaryTypeName","src":"3603:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3558:65:20"},"returnParameters":{"id":3947,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3946,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":3977,"src":"3647:4:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":3945,"name":"bool","nodeType":"ElementaryTypeName","src":"3647:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3646:6:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":4020,"nodeType":"FunctionDefinition","src":"3916:416:20","nodes":[],"body":{"id":4019,"nodeType":"Block","src":"4047:285:20","nodes":[],"statements":[{"body":{"id":4015,"nodeType":"Block","src":"4102:203:20","statements":[{"assignments":[3997],"declarations":[{"constant":false,"id":3997,"mutability":"mutable","name":"trader","nameLocation":"4124:6:20","nodeType":"VariableDeclaration","scope":4015,"src":"4116:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":3996,"name":"address","nodeType":"ElementaryTypeName","src":"4116:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":4001,"initialValue":{"baseExpression":{"id":3998,"name":"traderList","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3983,"src":"4133:10:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":4000,"indexExpression":{"id":3999,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3989,"src":"4144:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4133:13:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"4116:30:20"},{"condition":{"id":4006,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4164:25:20","subExpression":{"arguments":[{"id":4003,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3980,"src":"4175:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":4004,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3997,"src":"4182:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"id":4002,"name":"_isMMSafe","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3910,"src":"4165:9:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_bool_$","typeString":"function (struct Types.State storage pointer,address) view returns (bool)"}},"id":4005,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4165:24:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4010,"nodeType":"IfStatement","src":"4160:76:20","trueBody":{"id":4009,"nodeType":"Block","src":"4191:45:20","statements":[{"expression":{"hexValue":"66616c7365","id":4007,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4216:5:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"functionReturnParameters":3987,"id":4008,"nodeType":"Return","src":"4209:12:20"}]}},{"id":4014,"nodeType":"UncheckedBlock","src":"4249:46:20","statements":[{"expression":{"id":4012,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"4277:3:20","subExpression":{"id":4011,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3989,"src":"4279:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4013,"nodeType":"ExpressionStatement","src":"4277:3:20"}]}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":3995,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":3992,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3989,"src":"4077:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":3993,"name":"traderList","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3983,"src":"4081:10:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":3994,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","src":"4081:17:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4077:21:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4016,"initializationExpression":{"assignments":[3989],"declarations":[{"constant":false,"id":3989,"mutability":"mutable","name":"i","nameLocation":"4070:1:20","nodeType":"VariableDeclaration","scope":4016,"src":"4062:9:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":3988,"name":"uint256","nodeType":"ElementaryTypeName","src":"4062:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":3991,"initialValue":{"hexValue":"30","id":3990,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4074:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"4062:13:20"},"nodeType":"ForStatement","src":"4057:248:20"},{"expression":{"hexValue":"74727565","id":4017,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4321:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"functionReturnParameters":3987,"id":4018,"nodeType":"Return","src":"4314:11:20"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_isAllMMSafe","nameLocation":"3925:12:20","parameters":{"id":3984,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3980,"mutability":"mutable","name":"state","nameLocation":"3967:5:20","nodeType":"VariableDeclaration","scope":4020,"src":"3947:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":3979,"nodeType":"UserDefinedTypeName","pathNode":{"id":3978,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"3947:11:20"},"referencedDeclaration":5971,"src":"3947:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":3983,"mutability":"mutable","name":"traderList","nameLocation":"4001:10:20","nodeType":"VariableDeclaration","scope":4020,"src":"3982:29:20","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[]"},"typeName":{"baseType":{"id":3981,"name":"address","nodeType":"ElementaryTypeName","src":"3982:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":3982,"nodeType":"ArrayTypeName","src":"3982:9:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage_ptr","typeString":"address[]"}},"visibility":"internal"}],"src":"3937:80:20"},"returnParameters":{"id":3987,"nodeType":"ParameterList","parameters":[{"constant":false,"id":3986,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":4020,"src":"4041:4:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":3985,"name":"bool","nodeType":"ElementaryTypeName","src":"4041:4:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"4040:6:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":4216,"nodeType":"FunctionDefinition","src":"4509:3531:20","nodes":[],"body":{"id":4215,"nodeType":"Block","src":"4674:3366:20","nodes":[],"statements":[{"assignments":[4034],"declarations":[{"constant":false,"id":4034,"mutability":"mutable","name":"maintenanceMarginPrime","nameLocation":"6257:22:20","nodeType":"VariableDeclaration","scope":4215,"src":"6250:29:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4033,"name":"int256","nodeType":"ElementaryTypeName","src":"6250:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4035,"nodeType":"VariableDeclarationStatement","src":"6250:29:20"},{"assignments":[4037],"declarations":[{"constant":false,"id":4037,"mutability":"mutable","name":"netValuePrime","nameLocation":"6296:13:20","nodeType":"VariableDeclaration","scope":4215,"src":"6289:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4036,"name":"int256","nodeType":"ElementaryTypeName","src":"6289:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4050,"initialValue":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4049,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"expression":{"id":4038,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"6312:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4039,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"6312:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":4041,"indexExpression":{"id":4040,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"6332:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6312:27:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"baseExpression":{"expression":{"id":4044,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"6372:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4045,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"6372:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4047,"indexExpression":{"id":4046,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"6394:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6372:29:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4042,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"6354:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4043,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"6354:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4048,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6354:48:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"6312:90:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"6289:113:20"},{"body":{"id":4141,"nodeType":"Block","src":"6474:888:20","statements":[{"assignments":[4063],"declarations":[{"constant":false,"id":4063,"mutability":"mutable","name":"p","nameLocation":"6496:1:20","nodeType":"VariableDeclaration","scope":4141,"src":"6488:9:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4062,"name":"address","nodeType":"ElementaryTypeName","src":"6488:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":4070,"initialValue":{"baseExpression":{"baseExpression":{"expression":{"id":4064,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"6500:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4065,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"6500:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":4067,"indexExpression":{"id":4066,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"6520:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6500:27:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":4069,"indexExpression":{"id":4068,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4052,"src":"6528:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6500:30:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"6488:42:20"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":4073,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4071,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4028,"src":"6548:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":4072,"name":"p","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4063,"src":"6556:1:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6548:9:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4136,"nodeType":"IfStatement","src":"6544:749:20","trueBody":{"id":4135,"nodeType":"Block","src":"6559:734:20","statements":[{"assignments":[4075,4077],"declarations":[{"constant":false,"id":4075,"mutability":"mutable","name":"paperAmountPrime","nameLocation":"6606:16:20","nodeType":"VariableDeclaration","scope":4135,"src":"6599:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4074,"name":"int256","nodeType":"ElementaryTypeName","src":"6599:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4077,"mutability":"mutable","name":"creditAmountPrime","nameLocation":"6651:17:20","nodeType":"VariableDeclaration","scope":4135,"src":"6644:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4076,"name":"int256","nodeType":"ElementaryTypeName","src":"6644:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4084,"initialValue":{"arguments":[{"id":4082,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"6713:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":4079,"name":"p","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4063,"src":"6700:1:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4078,"name":"IPerpetual","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2929,"src":"6689:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPerpetual_$2929_$","typeString":"type(contract IPerpetual)"}},"id":4080,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6689:13:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPerpetual_$2929","typeString":"contract IPerpetual"}},"id":4081,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":2894,"src":"6689:23:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_int256_$_t_int256_$","typeString":"function (address) view external returns (int256,int256)"}},"id":4083,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6689:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$","typeString":"tuple(int256,int256)"}},"nodeType":"VariableDeclarationStatement","src":"6577:143:20"},{"assignments":[4089],"declarations":[{"constant":false,"id":4089,"mutability":"mutable","name":"params","nameLocation":"6763:6:20","nodeType":"VariableDeclaration","scope":4135,"src":"6738:31:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"},"typeName":{"id":4088,"nodeType":"UserDefinedTypeName","pathNode":{"id":4087,"name":"Types.RiskParams","nodeType":"IdentifierPath","referencedDeclaration":6002,"src":"6738:16:20"},"referencedDeclaration":6002,"src":"6738:16:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"}},"visibility":"internal"}],"id":4094,"initialValue":{"baseExpression":{"expression":{"id":4090,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"6772:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4091,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"6772:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":4093,"indexExpression":{"id":4092,"name":"p","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4063,"src":"6793:1:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6772:23:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"nodeType":"VariableDeclarationStatement","src":"6738:57:20"},{"assignments":[4096],"declarations":[{"constant":false,"id":4096,"mutability":"mutable","name":"price","nameLocation":"6820:5:20","nodeType":"VariableDeclaration","scope":4135,"src":"6813:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4095,"name":"int256","nodeType":"ElementaryTypeName","src":"6813:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4106,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"id":4100,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4089,"src":"6884:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":4101,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"markPriceSource","nodeType":"MemberAccess","referencedDeclaration":5997,"src":"6884:22:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4099,"name":"IMarkPriceSource","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2882,"src":"6867:16:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IMarkPriceSource_$2882_$","typeString":"type(contract IMarkPriceSource)"}},"id":4102,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6867:40:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IMarkPriceSource_$2882","typeString":"contract IMarkPriceSource"}},"id":4103,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getMarkPrice","nodeType":"MemberAccess","referencedDeclaration":2881,"src":"6867:53:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint256_$","typeString":"function () view external returns (uint256)"}},"id":4104,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6867:55:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4097,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"6828:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4098,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"6828:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4105,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6828:112:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"6813:127:20"},{"expression":{"id":4114,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4107,"name":"netValuePrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4037,"src":"6958:13:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4113,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":4110,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4096,"src":"7023:5:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"id":4108,"name":"paperAmountPrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4075,"src":"6995:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4109,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalMul","nodeType":"MemberAccess","referencedDeclaration":9293,"src":"6995:27:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":4111,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"6995:34:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":4112,"name":"creditAmountPrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4077,"src":"7052:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"6995:74:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"6958:111:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4115,"nodeType":"ExpressionStatement","src":"6958:111:20"},{"expression":{"id":4133,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4116,"name":"maintenanceMarginPrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4034,"src":"7087:22:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4131,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4127,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"id":4121,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4096,"src":"7181:5:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"id":4119,"name":"paperAmountPrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4075,"src":"7153:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4120,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalMul","nodeType":"MemberAccess","referencedDeclaration":9293,"src":"7153:27:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":4122,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7153:34:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4123,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"abs","nodeType":"MemberAccess","referencedDeclaration":9334,"src":"7153:38:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_uint256_$bound_to$_t_int256_$","typeString":"function (int256) pure returns (uint256)"}},"id":4124,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7153:40:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":4125,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4089,"src":"7220:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":4126,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"liquidationThreshold","nodeType":"MemberAccess","referencedDeclaration":5991,"src":"7220:27:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7153:94:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":4128,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7152:96:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"expression":{"id":4129,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"7251:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":4130,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"7251:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7152:108:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4117,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"7113:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4118,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"7113:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4132,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7113:165:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"7087:191:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4134,"nodeType":"ExpressionStatement","src":"7087:191:20"}]}},{"id":4140,"nodeType":"UncheckedBlock","src":"7306:46:20","statements":[{"expression":{"id":4138,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"7334:3:20","subExpression":{"id":4137,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4052,"src":"7336:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4139,"nodeType":"ExpressionStatement","src":"7334:3:20"}]}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4055,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4052,"src":"6432:1:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"baseExpression":{"expression":{"id":4056,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"6436:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4057,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"6436:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":4059,"indexExpression":{"id":4058,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"6456:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6436:27:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":4060,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","src":"6436:34:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6432:38:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4142,"initializationExpression":{"assignments":[4052],"declarations":[{"constant":false,"id":4052,"mutability":"mutable","name":"i","nameLocation":"6425:1:20","nodeType":"VariableDeclaration","scope":4142,"src":"6417:9:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4051,"name":"uint256","nodeType":"ElementaryTypeName","src":"6417:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4054,"initialValue":{"hexValue":"30","id":4053,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6429:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"6417:13:20"},"nodeType":"ForStatement","src":"6412:950:20"},{"assignments":[4144,4146],"declarations":[{"constant":false,"id":4144,"mutability":"mutable","name":"paperAmount","nameLocation":"7379:11:20","nodeType":"VariableDeclaration","scope":4215,"src":"7372:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4143,"name":"int256","nodeType":"ElementaryTypeName","src":"7372:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4146,"mutability":"mutable","name":"creditAmount","nameLocation":"7399:12:20","nodeType":"VariableDeclaration","scope":4215,"src":"7392:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4145,"name":"int256","nodeType":"ElementaryTypeName","src":"7392:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4153,"initialValue":{"arguments":[{"id":4151,"name":"trader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4026,"src":"7455:6:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":4148,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4028,"src":"7426:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4147,"name":"IPerpetual","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2929,"src":"7415:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPerpetual_$2929_$","typeString":"type(contract IPerpetual)"}},"id":4149,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7415:16:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPerpetual_$2929","typeString":"contract IPerpetual"}},"id":4150,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":2894,"src":"7415:26:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_int256_$_t_int256_$","typeString":"function (address) view external returns (int256,int256)"}},"id":4152,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7415:56:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$","typeString":"tuple(int256,int256)"}},"nodeType":"VariableDeclarationStatement","src":"7371:100:20"},{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4156,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4154,"name":"paperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4144,"src":"7485:11:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":4155,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7500:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7485:16:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4160,"nodeType":"IfStatement","src":"7481:55:20","trueBody":{"id":4159,"nodeType":"Block","src":"7503:33:20","statements":[{"expression":{"hexValue":"30","id":4157,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7524:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":4032,"id":4158,"nodeType":"Return","src":"7517:8:20"}]}},{"assignments":[4162],"declarations":[{"constant":false,"id":4162,"mutability":"mutable","name":"multiplier","nameLocation":"7552:10:20","nodeType":"VariableDeclaration","scope":4215,"src":"7545:17:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4161,"name":"int256","nodeType":"ElementaryTypeName","src":"7545:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4189,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4165,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4163,"name":"paperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4144,"src":"7565:11:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":4164,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7579:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7565:15:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4186,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":4179,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"7753:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":4180,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"7753:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"expression":{"baseExpression":{"expression":{"id":4181,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"7765:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4182,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"7765:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":4184,"indexExpression":{"id":4183,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4028,"src":"7786:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7765:26:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"id":4185,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"liquidationThreshold","nodeType":"MemberAccess","referencedDeclaration":5991,"src":"7765:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7753:59:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4177,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"7718:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4178,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"7718:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4187,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7718:108:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4188,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"7565:261:20","trueExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4175,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":4168,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"7630:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":4169,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"7630:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"baseExpression":{"expression":{"id":4170,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4024,"src":"7642:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4171,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"7642:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":4173,"indexExpression":{"id":4172,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4028,"src":"7663:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7642:26:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"id":4174,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"liquidationThreshold","nodeType":"MemberAccess","referencedDeclaration":5991,"src":"7642:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7630:59:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4166,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"7595:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4167,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"7595:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4176,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7595:108:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"7545:281:20"},{"assignments":[4191],"declarations":[{"constant":false,"id":4191,"mutability":"mutable","name":"liqPrice","nameLocation":"7843:8:20","nodeType":"VariableDeclaration","scope":4215,"src":"7836:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4190,"name":"int256","nodeType":"ElementaryTypeName","src":"7836:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4204,"initialValue":{"arguments":[{"id":4202,"name":"multiplier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4162,"src":"7969:10:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"arguments":[{"id":4199,"name":"paperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4144,"src":"7945:11:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"components":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4196,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4194,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4192,"name":"maintenanceMarginPrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4034,"src":"7855:22:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":4193,"name":"netValuePrime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4037,"src":"7892:13:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"7855:50:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":4195,"name":"creditAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4146,"src":"7920:12:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"7855:77:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"id":4197,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7854:79:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4198,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalDiv","nodeType":"MemberAccess","referencedDeclaration":9310,"src":"7854:90:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":4200,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7854:103:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4201,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalDiv","nodeType":"MemberAccess","referencedDeclaration":9310,"src":"7854:114:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":4203,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"7854:126:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"7836:144:20"},{"expression":{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4207,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4205,"name":"liqPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4191,"src":"7997:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"30","id":4206,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8008:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7997:12:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"arguments":[{"id":4211,"name":"liqPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4191,"src":"8024:8:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":4210,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8016:7:20","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":4209,"name":"uint256","nodeType":"ElementaryTypeName","src":"8016:7:20","typeDescriptions":{}}},"id":4212,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8016:17:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4213,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"7997:36:20","trueExpression":{"hexValue":"30","id":4208,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8012:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":4032,"id":4214,"nodeType":"Return","src":"7990:43:20"}]},"documentation":{"id":4021,"nodeType":"StructuredDocumentation","src":"4338:166:20","text":"@return liquidationPrice It should be considered as the position can never be\n liquidated (absolutely safe) or being liquidated at the present if return 0."},"functionSelector":"8bb9082c","implemented":true,"kind":"function","modifiers":[],"name":"getLiquidationPrice","nameLocation":"4518:19:20","parameters":{"id":4029,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4024,"mutability":"mutable","name":"state","nameLocation":"4567:5:20","nodeType":"VariableDeclaration","scope":4216,"src":"4547:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":4023,"nodeType":"UserDefinedTypeName","pathNode":{"id":4022,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"4547:11:20"},"referencedDeclaration":5971,"src":"4547:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":4026,"mutability":"mutable","name":"trader","nameLocation":"4590:6:20","nodeType":"VariableDeclaration","scope":4216,"src":"4582:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4025,"name":"address","nodeType":"ElementaryTypeName","src":"4582:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4028,"mutability":"mutable","name":"perp","nameLocation":"4614:4:20","nodeType":"VariableDeclaration","scope":4216,"src":"4606:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4027,"name":"address","nodeType":"ElementaryTypeName","src":"4606:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"4537:87:20"},"returnParameters":{"id":4032,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4031,"mutability":"mutable","name":"liquidationPrice","nameLocation":"4656:16:20","nodeType":"VariableDeclaration","scope":4216,"src":"4648:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4030,"name":"uint256","nodeType":"ElementaryTypeName","src":"4648:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4647:26:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":4355,"nodeType":"FunctionDefinition","src":"8206:1617:20","nodes":[],"body":{"id":4354,"nodeType":"Block","src":"8542:1281:20","nodes":[],"statements":[{"expression":{"arguments":[{"id":4240,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"8603:35:20","subExpression":{"arguments":[{"id":4237,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4220,"src":"8614:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":4238,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4224,"src":"8621:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"id":4236,"name":"_isMMSafe","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3910,"src":"8604:9:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_bool_$","typeString":"function (struct Types.State storage pointer,address) view returns (bool)"}},"id":4239,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8604:34:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":4241,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9268,"src":"8640:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$9268_$","typeString":"type(library Errors)"}},"id":4242,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ACCOUNT_IS_SAFE","nodeType":"MemberAccess","referencedDeclaration":9234,"src":"8640:22:20","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":4235,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"8595:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":4243,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8595:68:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4244,"nodeType":"ExpressionStatement","src":"8595:68:20"},{"assignments":[4246,null],"declarations":[{"constant":false,"id":4246,"mutability":"mutable","name":"brokenPaperAmount","nameLocation":"8751:17:20","nodeType":"VariableDeclaration","scope":4354,"src":"8744:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4245,"name":"int256","nodeType":"ElementaryTypeName","src":"8744:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null],"id":4253,"initialValue":{"arguments":[{"id":4251,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4224,"src":"8814:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":4248,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4222,"src":"8785:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4247,"name":"IPerpetual","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2929,"src":"8774:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPerpetual_$2929_$","typeString":"type(contract IPerpetual)"}},"id":4249,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8774:16:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPerpetual_$2929","typeString":"contract IPerpetual"}},"id":4250,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":2894,"src":"8774:26:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_int256_$_t_int256_$","typeString":"function (address) view external returns (int256,int256)"}},"id":4252,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8774:66:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$","typeString":"tuple(int256,int256)"}},"nodeType":"VariableDeclarationStatement","src":"8743:97:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4257,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4255,"name":"brokenPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4246,"src":"8858:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":4256,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8879:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"8858:22:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":4258,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9268,"src":"8882:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$9268_$","typeString":"type(library Errors)"}},"id":4259,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"TRADER_HAS_NO_POSITION","nodeType":"MemberAccess","referencedDeclaration":9240,"src":"8882:29:20","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":4254,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"8850:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":4260,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8850:62:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4261,"nodeType":"ExpressionStatement","src":"8850:62:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4267,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4265,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4263,"name":"requestPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4226,"src":"8943:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":4264,"name":"brokenPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4246,"src":"8964:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"8943:38:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":4266,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8984:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"8943:42:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":4268,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9268,"src":"8999:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$9268_$","typeString":"type(library Errors)"}},"id":4269,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"LIQUIDATION_REQUEST_AMOUNT_WRONG","nodeType":"MemberAccess","referencedDeclaration":9252,"src":"8999:39:20","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":4262,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"8922:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":4270,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"8922:126:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4271,"nodeType":"ExpressionStatement","src":"8922:126:20"},{"expression":{"id":4283,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4272,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4229,"src":"9058:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4279,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":4273,"name":"requestPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4226,"src":"9078:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4274,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"abs","nodeType":"MemberAccess","referencedDeclaration":9334,"src":"9078:22:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_uint256_$bound_to$_t_int256_$","typeString":"function (int256) pure returns (uint256)"}},"id":4275,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9078:24:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":4276,"name":"brokenPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4246,"src":"9105:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4277,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"abs","nodeType":"MemberAccess","referencedDeclaration":9334,"src":"9105:21:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_uint256_$bound_to$_t_int256_$","typeString":"function (int256) pure returns (uint256)"}},"id":4278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9105:23:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9078:50:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"id":4281,"name":"requestPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4226,"src":"9175:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4282,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"9078:115:20","trueExpression":{"id":4280,"name":"brokenPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4246,"src":"9143:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"9058:135:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4284,"nodeType":"ExpressionStatement","src":"9058:135:20"},{"assignments":[4289],"declarations":[{"constant":false,"id":4289,"mutability":"mutable","name":"params","nameLocation":"9250:6:20","nodeType":"VariableDeclaration","scope":4354,"src":"9225:31:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"},"typeName":{"id":4288,"nodeType":"UserDefinedTypeName","pathNode":{"id":4287,"name":"Types.RiskParams","nodeType":"IdentifierPath","referencedDeclaration":6002,"src":"9225:16:20"},"referencedDeclaration":6002,"src":"9225:16:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams"}},"visibility":"internal"}],"id":4294,"initialValue":{"baseExpression":{"expression":{"id":4290,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4220,"src":"9259:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4291,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"9259:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":4293,"indexExpression":{"id":4292,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4222,"src":"9280:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"9259:26:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"nodeType":"VariableDeclarationStatement","src":"9225:60:20"},{"assignments":[4296],"declarations":[{"constant":false,"id":4296,"mutability":"mutable","name":"price","nameLocation":"9303:5:20","nodeType":"VariableDeclaration","scope":4354,"src":"9295:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4295,"name":"uint256","nodeType":"ElementaryTypeName","src":"9295:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4303,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"id":4298,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4289,"src":"9328:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":4299,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"markPriceSource","nodeType":"MemberAccess","referencedDeclaration":5997,"src":"9328:22:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4297,"name":"IMarkPriceSource","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2882,"src":"9311:16:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IMarkPriceSource_$2882_$","typeString":"type(contract IMarkPriceSource)"}},"id":4300,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9311:40:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IMarkPriceSource_$2882","typeString":"contract IMarkPriceSource"}},"id":4301,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getMarkPrice","nodeType":"MemberAccess","referencedDeclaration":2881,"src":"9311:53:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint256_$","typeString":"function () view external returns (uint256)"}},"id":4302,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9311:55:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9295:71:20"},{"assignments":[4305],"declarations":[{"constant":false,"id":4305,"mutability":"mutable","name":"priceOffset","nameLocation":"9384:11:20","nodeType":"VariableDeclaration","scope":4354,"src":"9376:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4304,"name":"uint256","nodeType":"ElementaryTypeName","src":"9376:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4314,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4313,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4306,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4296,"src":"9399:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":4307,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4289,"src":"9407:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":4308,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"liquidationPriceOff","nodeType":"MemberAccess","referencedDeclaration":5993,"src":"9407:26:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9399:34:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":4310,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"9398:36:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"expression":{"id":4311,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"9437:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":4312,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"9437:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9398:48:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9376:70:20"},{"expression":{"id":4326,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4315,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4296,"src":"9456:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4318,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4316,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4229,"src":"9464:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":4317,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9484:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"9464:21:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4324,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4322,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4296,"src":"9534:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":4323,"name":"priceOffset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4305,"src":"9542:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9534:19:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4325,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"9464:89:20","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4321,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4319,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4296,"src":"9500:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":4320,"name":"priceOffset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4305,"src":"9508:11:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9500:19:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9456:97:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4327,"nodeType":"ExpressionStatement","src":"9456:97:20"},{"expression":{"id":4339,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4328,"name":"liqtorCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4231,"src":"9599:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4330,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"9632:2:20","subExpression":{"hexValue":"31","id":4329,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9633:1:20","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"typeDescriptions":{"typeIdentifier":"t_rational_minus_1_by_1","typeString":"int_const -1"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"arguments":[{"arguments":[{"id":4335,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4296,"src":"9696:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4333,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"9678:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4334,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"9678:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4336,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9678:24:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"expression":{"id":4331,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4229,"src":"9649:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4332,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"decimalMul","nodeType":"MemberAccess","referencedDeclaration":9293,"src":"9649:28:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$bound_to$_t_int256_$","typeString":"function (int256,int256) pure returns (int256)"}},"id":4337,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9649:54:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"9632:71:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"9599:104:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4340,"nodeType":"ExpressionStatement","src":"9599:104:20"},{"expression":{"id":4352,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4341,"name":"insuranceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4233,"src":"9713:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4351,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4347,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":4342,"name":"liqtorCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4231,"src":"9741:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4343,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"abs","nodeType":"MemberAccess","referencedDeclaration":9334,"src":"9741:22:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_uint256_$bound_to$_t_int256_$","typeString":"function (int256) pure returns (uint256)"}},"id":4344,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"9741:24:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":4345,"name":"params","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4289,"src":"9768:6:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage_ptr","typeString":"struct Types.RiskParams storage pointer"}},"id":4346,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"insuranceFeeRate","nodeType":"MemberAccess","referencedDeclaration":5995,"src":"9768:23:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9741:50:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":4348,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"9740:52:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"expression":{"id":4349,"name":"Types","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6020,"src":"9807:5:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Types_$6020_$","typeString":"type(library Types)"}},"id":4350,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":6019,"src":"9807:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9740:76:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9713:103:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4353,"nodeType":"ExpressionStatement","src":"9713:103:20"}]},"documentation":{"id":4217,"nodeType":"StructuredDocumentation","src":"8046:155:20","text":"@notice Using a fixed discount price model.\n Charge fee from liquidated trader.\n Will limit you liquidation request to the position size."},"functionSelector":"a67da8b0","implemented":true,"kind":"function","modifiers":[],"name":"getLiquidateCreditAmount","nameLocation":"8215:24:20","parameters":{"id":4227,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4220,"mutability":"mutable","name":"state","nameLocation":"8269:5:20","nodeType":"VariableDeclaration","scope":4355,"src":"8249:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":4219,"nodeType":"UserDefinedTypeName","pathNode":{"id":4218,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"8249:11:20"},"referencedDeclaration":5971,"src":"8249:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":4222,"mutability":"mutable","name":"perp","nameLocation":"8292:4:20","nodeType":"VariableDeclaration","scope":4355,"src":"8284:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4221,"name":"address","nodeType":"ElementaryTypeName","src":"8284:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4224,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"8314:16:20","nodeType":"VariableDeclaration","scope":4355,"src":"8306:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4223,"name":"address","nodeType":"ElementaryTypeName","src":"8306:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4226,"mutability":"mutable","name":"requestPaperAmount","nameLocation":"8347:18:20","nodeType":"VariableDeclaration","scope":4355,"src":"8340:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4225,"name":"int256","nodeType":"ElementaryTypeName","src":"8340:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"8239:132:20"},"returnParameters":{"id":4234,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4229,"mutability":"mutable","name":"liqtorPaperChange","nameLocation":"8437:17:20","nodeType":"VariableDeclaration","scope":4355,"src":"8430:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4228,"name":"int256","nodeType":"ElementaryTypeName","src":"8430:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4231,"mutability":"mutable","name":"liqtorCreditChange","nameLocation":"8475:18:20","nodeType":"VariableDeclaration","scope":4355,"src":"8468:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4230,"name":"int256","nodeType":"ElementaryTypeName","src":"8468:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4233,"mutability":"mutable","name":"insuranceFee","nameLocation":"8515:12:20","nodeType":"VariableDeclaration","scope":4355,"src":"8507:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4232,"name":"uint256","nodeType":"ElementaryTypeName","src":"8507:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8416:121:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":4491,"nodeType":"FunctionDefinition","src":"9875:1893:20","nodes":[],"body":{"id":4490,"nodeType":"Block","src":"10289:1479:20","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":4390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":4383,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4381,"name":"executor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4363,"src":"10320:8:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":4382,"name":"liquidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4365,"src":"10332:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"10320:22:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"baseExpression":{"baseExpression":{"expression":{"id":4384,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"10362:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4385,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"operatorRegistry","nodeType":"MemberAccess","referencedDeclaration":5964,"src":"10362:22:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_bool_$_$","typeString":"mapping(address => mapping(address => bool))"}},"id":4387,"indexExpression":{"id":4386,"name":"liquidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4365,"src":"10385:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"10362:34:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":4389,"indexExpression":{"id":4388,"name":"executor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4363,"src":"10397:8:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"10362:44:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"10320:86:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":4391,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9268,"src":"10420:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$9268_$","typeString":"type(library Errors)"}},"id":4392,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"INVALID_LIQUIDATION_EXECUTOR","nodeType":"MemberAccess","referencedDeclaration":9207,"src":"10420:35:20","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":4380,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"10299:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":4393,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"10299:166:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4394,"nodeType":"ExpressionStatement","src":"10299:166:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":4398,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4396,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"10496:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":4397,"name":"liquidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4365,"src":"10516:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"10496:30:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":4399,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9268,"src":"10540:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$9268_$","typeString":"type(library Errors)"}},"id":4400,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"SELF_LIQUIDATION_NOT_ALLOWED","nodeType":"MemberAccess","referencedDeclaration":9255,"src":"10540:35:20","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":4395,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"10475:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":4401,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"10475:110:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4402,"nodeType":"ExpressionStatement","src":"10475:110:20"},{"assignments":[4404],"declarations":[{"constant":false,"id":4404,"mutability":"mutable","name":"insuranceFee","nameLocation":"10603:12:20","nodeType":"VariableDeclaration","scope":4490,"src":"10595:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4403,"name":"uint256","nodeType":"ElementaryTypeName","src":"10595:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4405,"nodeType":"VariableDeclarationStatement","src":"10595:20:20"},{"expression":{"id":4416,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":4406,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4372,"src":"10639:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4407,"name":"liqtorCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4374,"src":"10670:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4408,"name":"insuranceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4404,"src":"10702:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":4409,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"10625:99:20","typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$_t_uint256_$","typeString":"tuple(int256,int256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":4411,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"10765:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":4412,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"10784:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4413,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"10802:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4414,"name":"requestPaperAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4369,"src":"10832:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":4410,"name":"getLiquidateCreditAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4355,"src":"10727:24:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$_t_address_$_t_int256_$returns$_t_int256_$_t_int256_$_t_uint256_$","typeString":"function (struct Types.State storage pointer,address,address,int256) view returns (int256,int256,uint256)"}},"id":4415,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"10727:133:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int256_$_t_int256_$_t_uint256_$","typeString":"tuple(int256,int256,uint256)"}},"src":"10625:235:20","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4417,"nodeType":"ExpressionStatement","src":"10625:235:20"},{"expression":{"id":4428,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"id":4418,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"10870:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4422,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"10870:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":4423,"indexExpression":{"expression":{"id":4420,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"10890:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4421,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"insurance","nodeType":"MemberAccess","referencedDeclaration":5966,"src":"10890:15:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"10870:36:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[{"id":4426,"name":"insuranceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4404,"src":"10928:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4424,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"10910:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4425,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"10910:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4427,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"10910:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"10870:71:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4429,"nodeType":"ExpressionStatement","src":"10870:71:20"},{"expression":{"id":4440,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4430,"name":"liqedCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4378,"src":"10996:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4439,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4434,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4431,"name":"liqtorCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4374,"src":"11028:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":4433,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"11061:2:20","subExpression":{"hexValue":"31","id":4432,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11062:1:20","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"typeDescriptions":{"typeIdentifier":"t_rational_minus_1_by_1","typeString":"int_const -1"}},"src":"11028:35:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":4437,"name":"insuranceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4404,"src":"11096:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":4435,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58678,"src":"11078:8:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_SafeCast_$58678_$","typeString":"type(library SafeCast)"}},"id":4436,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toInt256","nodeType":"MemberAccess","referencedDeclaration":58677,"src":"11078:17:20","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) pure returns (int256)"}},"id":4438,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11078:31:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"11028:81:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"10996:113:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4441,"nodeType":"ExpressionStatement","src":"10996:113:20"},{"expression":{"id":4447,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4442,"name":"liqedPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4376,"src":"11119:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":4446,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":4443,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4372,"src":"11138:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":4445,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"11158:2:20","subExpression":{"hexValue":"31","id":4444,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11159:1:20","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"typeDescriptions":{"typeIdentifier":"t_rational_minus_1_by_1","typeString":"int_const -1"}},"src":"11138:22:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"11119:41:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4448,"nodeType":"ExpressionStatement","src":"11119:41:20"},{"assignments":[4450],"declarations":[{"constant":false,"id":4450,"mutability":"mutable","name":"ltSN","nameLocation":"11197:4:20","nodeType":"VariableDeclaration","scope":4490,"src":"11189:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4449,"name":"uint256","nodeType":"ElementaryTypeName","src":"11189:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4457,"initialValue":{"baseExpression":{"baseExpression":{"expression":{"id":4451,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"11204:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4452,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"positionSerialNum","nodeType":"MemberAccess","referencedDeclaration":5944,"src":"11204:23:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_uint256_$_$","typeString":"mapping(address => mapping(address => uint256))"}},"id":4454,"indexExpression":{"id":4453,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"11228:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"11204:41:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4456,"indexExpression":{"id":4455,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"11246:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"11204:47:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11189:62:20"},{"assignments":[4459],"declarations":[{"constant":false,"id":4459,"mutability":"mutable","name":"liquidatorSN","nameLocation":"11269:12:20","nodeType":"VariableDeclaration","scope":4490,"src":"11261:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4458,"name":"uint256","nodeType":"ElementaryTypeName","src":"11261:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4466,"initialValue":{"baseExpression":{"baseExpression":{"expression":{"id":4460,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4359,"src":"11284:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4461,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"positionSerialNum","nodeType":"MemberAccess","referencedDeclaration":5944,"src":"11284:23:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_uint256_$_$","typeString":"mapping(address => mapping(address => uint256))"}},"id":4463,"indexExpression":{"id":4462,"name":"liquidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4365,"src":"11308:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"11284:35:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4465,"indexExpression":{"id":4464,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"11320:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"11284:41:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11261:64:20"},{"eventCall":{"arguments":[{"id":4468,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"11369:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4469,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"11387:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4470,"name":"liqedPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4376,"src":"11417:16:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4471,"name":"liqedCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4378,"src":"11447:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4472,"name":"ltSN","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4450,"src":"11478:4:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":4467,"name":"BeingLiquidated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3712,"src":"11340:15:20","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_int256_$_t_int256_$_t_uint256_$returns$__$","typeString":"function (address,address,int256,int256,uint256)"}},"id":4473,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11340:152:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4474,"nodeType":"EmitStatement","src":"11335:157:20"},{"eventCall":{"arguments":[{"id":4476,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"11536:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4477,"name":"liquidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4365,"src":"11554:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4478,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"11578:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4479,"name":"liqtorPaperChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4372,"src":"11608:17:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4480,"name":"liqtorCreditChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4374,"src":"11639:18:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4481,"name":"liquidatorSN","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4459,"src":"11671:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":4475,"name":"JoinLiquidation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3726,"src":"11507:15:20","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_address_$_t_int256_$_t_int256_$_t_uint256_$returns$__$","typeString":"function (address,address,address,int256,int256,uint256)"}},"id":4482,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11507:186:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4483,"nodeType":"EmitStatement","src":"11502:191:20"},{"eventCall":{"arguments":[{"id":4485,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4361,"src":"11724:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4486,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4367,"src":"11730:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4487,"name":"insuranceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4404,"src":"11748:12:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":4484,"name":"ChargeInsurance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3734,"src":"11708:15:20","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":4488,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11708:53:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4489,"nodeType":"EmitStatement","src":"11703:58:20"}]},"documentation":{"id":4356,"nodeType":"StructuredDocumentation","src":"9829:41:20","text":"@notice execute a liquidation request"},"functionSelector":"39a9cd22","implemented":true,"kind":"function","modifiers":[],"name":"requestLiquidation","nameLocation":"9884:18:20","parameters":{"id":4370,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4359,"mutability":"mutable","name":"state","nameLocation":"9932:5:20","nodeType":"VariableDeclaration","scope":4491,"src":"9912:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":4358,"nodeType":"UserDefinedTypeName","pathNode":{"id":4357,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"9912:11:20"},"referencedDeclaration":5971,"src":"9912:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":4361,"mutability":"mutable","name":"perp","nameLocation":"9955:4:20","nodeType":"VariableDeclaration","scope":4491,"src":"9947:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4360,"name":"address","nodeType":"ElementaryTypeName","src":"9947:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4363,"mutability":"mutable","name":"executor","nameLocation":"9977:8:20","nodeType":"VariableDeclaration","scope":4491,"src":"9969:16:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4362,"name":"address","nodeType":"ElementaryTypeName","src":"9969:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4365,"mutability":"mutable","name":"liquidator","nameLocation":"10003:10:20","nodeType":"VariableDeclaration","scope":4491,"src":"9995:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4364,"name":"address","nodeType":"ElementaryTypeName","src":"9995:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4367,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"10031:16:20","nodeType":"VariableDeclaration","scope":4491,"src":"10023:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4366,"name":"address","nodeType":"ElementaryTypeName","src":"10023:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":4369,"mutability":"mutable","name":"requestPaperAmount","nameLocation":"10064:18:20","nodeType":"VariableDeclaration","scope":4491,"src":"10057:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4368,"name":"int256","nodeType":"ElementaryTypeName","src":"10057:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"9902:186:20"},"returnParameters":{"id":4379,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4372,"mutability":"mutable","name":"liqtorPaperChange","nameLocation":"10143:17:20","nodeType":"VariableDeclaration","scope":4491,"src":"10136:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4371,"name":"int256","nodeType":"ElementaryTypeName","src":"10136:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4374,"mutability":"mutable","name":"liqtorCreditChange","nameLocation":"10181:18:20","nodeType":"VariableDeclaration","scope":4491,"src":"10174:25:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4373,"name":"int256","nodeType":"ElementaryTypeName","src":"10174:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4376,"mutability":"mutable","name":"liqedPaperChange","nameLocation":"10220:16:20","nodeType":"VariableDeclaration","scope":4491,"src":"10213:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4375,"name":"int256","nodeType":"ElementaryTypeName","src":"10213:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":4378,"mutability":"mutable","name":"liqedCreditChange","nameLocation":"10257:17:20","nodeType":"VariableDeclaration","scope":4491,"src":"10250:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4377,"name":"int256","nodeType":"ElementaryTypeName","src":"10250:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"10122:162:20"},"scope":4594,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":4514,"nodeType":"FunctionDefinition","src":"11774:236:20","nodes":[],"body":{"id":4513,"nodeType":"Block","src":"11897:113:20","nodes":[],"statements":[{"expression":{"id":4511,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":4501,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4499,"src":"11907:5:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"baseExpression":{"expression":{"id":4503,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4494,"src":"11932:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4504,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"perpRiskParams","nodeType":"MemberAccess","referencedDeclaration":5930,"src":"11932:20:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_RiskParams_$6002_storage_$","typeString":"mapping(address => struct Types.RiskParams storage ref)"}},"id":4506,"indexExpression":{"id":4505,"name":"perp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4496,"src":"11953:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"11932:26:20","typeDescriptions":{"typeIdentifier":"t_struct$_RiskParams_$6002_storage","typeString":"struct Types.RiskParams storage ref"}},"id":4507,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"markPriceSource","nodeType":"MemberAccess","referencedDeclaration":5997,"src":"11932:42:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":4502,"name":"IMarkPriceSource","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2882,"src":"11915:16:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IMarkPriceSource_$2882_$","typeString":"type(contract IMarkPriceSource)"}},"id":4508,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11915:60:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IMarkPriceSource_$2882","typeString":"contract IMarkPriceSource"}},"id":4509,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"getMarkPrice","nodeType":"MemberAccess","referencedDeclaration":2881,"src":"11915:86:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint256_$","typeString":"function () view external returns (uint256)"}},"id":4510,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"11915:88:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11907:96:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4512,"nodeType":"ExpressionStatement","src":"11907:96:20"}]},"functionSelector":"f4392a95","implemented":true,"kind":"function","modifiers":[],"name":"getMarkPrice","nameLocation":"11783:12:20","parameters":{"id":4497,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4494,"mutability":"mutable","name":"state","nameLocation":"11825:5:20","nodeType":"VariableDeclaration","scope":4514,"src":"11805:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":4493,"nodeType":"UserDefinedTypeName","pathNode":{"id":4492,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"11805:11:20"},"referencedDeclaration":5971,"src":"11805:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":4496,"mutability":"mutable","name":"perp","nameLocation":"11848:4:20","nodeType":"VariableDeclaration","scope":4514,"src":"11840:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4495,"name":"address","nodeType":"ElementaryTypeName","src":"11840:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"11795:63:20"},"returnParameters":{"id":4500,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4499,"mutability":"mutable","name":"price","nameLocation":"11890:5:20","nodeType":"VariableDeclaration","scope":4514,"src":"11882:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4498,"name":"uint256","nodeType":"ElementaryTypeName","src":"11882:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11881:15:20"},"scope":4594,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":4593,"nodeType":"FunctionDefinition","src":"12016:821:20","nodes":[],"body":{"id":4592,"nodeType":"Block","src":"12123:714:20","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":4535,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":4528,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"baseExpression":{"expression":{"id":4522,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12150:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4523,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"openPositions","nodeType":"MemberAccess","referencedDeclaration":5938,"src":"12150:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_array$_t_address_$dyn_storage_$","typeString":"mapping(address => address[] storage ref)"}},"id":4525,"indexExpression":{"id":4524,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12170:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"12150:37:20","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage","typeString":"address[] storage ref"}},"id":4526,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","src":"12150:44:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":4527,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12198:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"12150:49:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"id":4534,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"12215:47:20","subExpression":{"arguments":[{"id":4531,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12238:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},{"id":4532,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12245:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"},{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"id":4529,"name":"Liquidation","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4594,"src":"12216:11:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Liquidation_$4594_$","typeString":"type(library Liquidation)"}},"id":4530,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"_isMMSafe","nodeType":"MemberAccess","referencedDeclaration":3910,"src":"12216:21:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_State_$5971_storage_ptr_$_t_address_$returns$_t_bool_$","typeString":"function (struct Types.State storage pointer,address) view returns (bool)"}},"id":4533,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"12216:46:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"12150:112:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":4591,"nodeType":"IfStatement","src":"12133:698:20","trueBody":{"id":4590,"nodeType":"Block","src":"12273:558:20","statements":[{"assignments":[4537],"declarations":[{"constant":false,"id":4537,"mutability":"mutable","name":"primaryCredit","nameLocation":"12294:13:20","nodeType":"VariableDeclaration","scope":4590,"src":"12287:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":4536,"name":"int256","nodeType":"ElementaryTypeName","src":"12287:6:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":4542,"initialValue":{"baseExpression":{"expression":{"id":4538,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12310:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4539,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"12310:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":4541,"indexExpression":{"id":4540,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12330:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"12310:37:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"12287:60:20"},{"assignments":[4544],"declarations":[{"constant":false,"id":4544,"mutability":"mutable","name":"secondaryCredit","nameLocation":"12369:15:20","nodeType":"VariableDeclaration","scope":4590,"src":"12361:23:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":4543,"name":"uint256","nodeType":"ElementaryTypeName","src":"12361:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":4549,"initialValue":{"baseExpression":{"expression":{"id":4545,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12387:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4546,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"12387:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4548,"indexExpression":{"id":4547,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12409:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"12387:39:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"12361:65:20"},{"expression":{"id":4556,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"id":4550,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12440:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4553,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"12440:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":4554,"indexExpression":{"id":4552,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12460:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"12440:37:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":4555,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12480:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"12440:41:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4557,"nodeType":"ExpressionStatement","src":"12440:41:20"},{"expression":{"id":4564,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"id":4558,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12495:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4561,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"12495:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4562,"indexExpression":{"id":4560,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12517:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"12495:39:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":4563,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12537:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"12495:43:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4565,"nodeType":"ExpressionStatement","src":"12495:43:20"},{"expression":{"id":4573,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"id":4566,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12552:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4570,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"primaryCredit","nodeType":"MemberAccess","referencedDeclaration":5895,"src":"12552:19:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_int256_$","typeString":"mapping(address => int256)"}},"id":4571,"indexExpression":{"expression":{"id":4568,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12572:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4569,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"insurance","nodeType":"MemberAccess","referencedDeclaration":5966,"src":"12572:15:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"12552:36:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":4572,"name":"primaryCredit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4537,"src":"12592:13:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"12552:53:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":4574,"nodeType":"ExpressionStatement","src":"12552:53:20"},{"expression":{"id":4582,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"id":4575,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12619:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4579,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"secondaryCredit","nodeType":"MemberAccess","referencedDeclaration":5899,"src":"12619:21:20","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":4580,"indexExpression":{"expression":{"id":4577,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4517,"src":"12641:5:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State storage pointer"}},"id":4578,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberName":"insurance","nodeType":"MemberAccess","referencedDeclaration":5966,"src":"12641:15:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"12619:38:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":4581,"name":"secondaryCredit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4544,"src":"12661:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12619:57:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":4583,"nodeType":"ExpressionStatement","src":"12619:57:20"},{"eventCall":{"arguments":[{"id":4585,"name":"liquidatedTrader","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4519,"src":"12726:16:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":4586,"name":"primaryCredit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4537,"src":"12760:13:20","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":4587,"name":"secondaryCredit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":4544,"src":"12791:15:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":4584,"name":"HandleBadDebt","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3742,"src":"12695:13:20","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_int256_$_t_uint256_$returns$__$","typeString":"function (address,int256,uint256)"}},"id":4588,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"12695:125:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":4589,"nodeType":"EmitStatement","src":"12690:130:20"}]}}]},"functionSelector":"35b270c8","implemented":true,"kind":"function","modifiers":[],"name":"handleBadDebt","nameLocation":"12025:13:20","parameters":{"id":4520,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4517,"mutability":"mutable","name":"state","nameLocation":"12068:5:20","nodeType":"VariableDeclaration","scope":4593,"src":"12048:25:20","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"},"typeName":{"id":4516,"nodeType":"UserDefinedTypeName","pathNode":{"id":4515,"name":"Types.State","nodeType":"IdentifierPath","referencedDeclaration":5971,"src":"12048:11:20"},"referencedDeclaration":5971,"src":"12048:11:20","typeDescriptions":{"typeIdentifier":"t_struct$_State_$5971_storage_ptr","typeString":"struct Types.State"}},"visibility":"internal"},{"constant":false,"id":4519,"mutability":"mutable","name":"liquidatedTrader","nameLocation":"12091:16:20","nodeType":"VariableDeclaration","scope":4593,"src":"12083:24:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":4518,"name":"address","nodeType":"ElementaryTypeName","src":"12083:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"12038:75:20"},"returnParameters":{"id":4521,"nodeType":"ParameterList","parameters":[],"src":"12123:0:20"},"scope":4594,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"Liquidation","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[4594],"name":"Liquidation","nameLocation":"359:11:20","scope":4595,"usedErrors":[]}],"license":"BUSL-1.1"},"id":20}